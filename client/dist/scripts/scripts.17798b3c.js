"use strict";angular.module("jacathonApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","ui.router","leaflet-directive"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("home",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("about",{url:"/about",templateUrl:"views/about.html",controller:"AboutCtrl"}).state("tuits",{url:"/tuits",templateUrl:"views/tuits.html",controller:"TuitsCtrl"}).state("map",{url:"/map",templateUrl:"views/map.html",controller:"MapCtrl"}),b.otherwise("/")}]),angular.module("jacathonApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("jacathonApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("jacathonApp").controller("TuitsCtrl",["$scope","$http","$interval","$sce","$q",function(a,b,c,d,e){a.tuits=[];var f=function(){var c;b.get("http://155.210.71.106:5000/morelab/api/v1.0/stream").success(function(f){var g=[];angular.forEach(f,function(a){var e={id:a.id,align:"center",hide_media:!0},e=$.param(e);c="https://api.twitter.com/1/statuses/oembed.json?"+e,c=d.trustAsResourceUrl(c),g.push(b.get(c).success(function(b){a.url=b.html}))}),e.all(g).then(function(){function b(a,b){if("js"==b){var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",a)}else if("css"==b){var c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a)}"undefined"!=typeof c&&document.getElementsByTagName("body")[0].appendChild(c)}for(var c=0;c<f.length;c++){for(var d=!1,e=0;e<a.tuits.length&&!d;e++)f[c].id===a.tuits[e].id?(console.log("The Same"),d=!0):console.log("Not the same");d||a.tuits.push(f[c])}b("scripts/widgets.js","js")})}).error(function(a,b){console.log(a),console.log(b)}).catch(function(a){console.log(a)})};f();var g=c(f,5e3);a.$on("$destroy",function(){angular.isDefined(g)&&(c.cancel(g),g=void 0)})}]),angular.module("jacathonApp").controller("MapCtrl",["$scope","$http","$interval","$sce","leafletData","$q",function(a,b,c,d,e,f){angular.extend(a,{center:{lat:41.6333333,lng:-.8833333,zoom:8}});var g=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Mapas por <a href="http://arcgisonline.com" target="blank">ArcGIS Online</a>'}),h={fillColor:"green",weight:5,opacity:1,color:"blue",fillOpacity:.7},i=L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.jpg",{attribution:'Mapas por <a href="http://arcgisonline.com" target="blank">ArcGIS Online</a>'}),j={MapQuest:g,ArcGIS:i};e.getMap().then(function(a){L.control.layers(j).addTo(a)}),b.get("http://155.210.71.106:5000/morelab/api/v1.0/stream").success(function(c){var g=[];angular.forEach(c,function(a){var c={id:a.id,align:"center",hide_media:"true"},c=$.param(c),e="https://api.twitter.com/1/statuses/oembed.json?"+c;e=d.trustAsResourceUrl(e),g.push(b.get(e).success(function(b){a.url=b.html}))}),f.all(g).then(function(){a.geoJson={};for(var b={type:"FeatureCollection",features:[]},d=0;d<c.length;d++){var f={type:"Feature",geometry:{type:"Point",coordinates:[c[d].long,c[d].lat]},properties:{html:c[d].url+' <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>'}};"None"!=f.geometry.coordinates[0]&&b.features.push(f)}a.geoJson=L.geoJson(b,{style:h,onEachFeature:function(a,b){a.properties&&b.bindPopup(a.properties.html)}}),e.getMap().then(function(b){function c(a,b){if("js"==b){var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",a)}else if("css"==b){var c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a)}"undefined"!=typeof c&&document.getElementsByTagName("body")[0].appendChild(c)}a.geoJson.addTo(b),c("scripts/widgets.js","js")})})}).error(function(a,b){console.log(a),console.log(b)}).catch(function(a){console.log(a)})}]),function(a,b){function c(a){for(var b,c=1;b=arguments[c];c++)for(var d in b)a[d]=b[d];return a}function d(a){return Array.prototype.slice.call(a)}function e(a,b){for(var c,d=0;c=a[d];d++)if(b==c)return d;return-1}function f(){for(var a=d(arguments),b=[],c=0,e=a.length;e>c;c++)a[c].length>0&&b.push(a[c].replace(/\/$/,""));return b.join("/")}function g(a,b,c){for(var d=b.split("/"),e=a;d.length>1;){var f=d.shift();e=e[f]=e[f]||{}}e[d[0]]=c}function h(){}function i(a,b){this.id=this.path=a,this.force=!!b}function j(a,b){this.id=a,this.body=b,"undefined"==typeof b&&(this.path=this.resolvePath(a))}function k(a,b){this.deps=a,this.collectResults=b,0==this.deps.length&&this.complete()}function l(a,b){this.deps=a,this.collectResults=b}function m(){for(var a in C)if("interactive"==C[a].readyState)return H[C[a].id]}function n(a,b){var c;return!a&&B&&(c=z||m()),c?(delete H[c.scriptId],c.body=b,c.execute()):(y=c=new j(a,b),G[c.id]=c),c}function o(){var a,b,c=d(arguments);return"string"==typeof c[0]&&(a=c.shift()),b=c.shift(),n(a,b)}function p(a,b){var c=b.id||"",d=c.split("/");d.pop();var e=d.join("/");return a.replace(/^\./,e)}function q(a,b){function c(a){return j.exports[p(a,b)]}for(var d=[],e=0,f=a.length;f>e;e++)"require"!=a[e]?"exports"!=a[e]?d.push(c(a[e])):(b.exports=b.exports||{},d.push(b.exports)):d.push(c);return d}function r(){var a,b,c=d(arguments),f=[];return"string"==typeof c[0]&&(a=c.shift()),N(c[0])&&(f=c.shift()),b=c.shift(),n(a,function(a){function c(){var c,e=q(d(f),g);c="function"==typeof b?b.apply(g,e):b,"undefined"==typeof c&&(c=g.exports),a(c)}for(var g=this,h=[],i=0,j=f.length;j>i;i++){var k=f[i];-1==e(["require","exports"],k)&&h.push(p(k,g))}h.length>0?s.apply(this,h.concat(c)):c()})}function s(){var a,b,c=d(arguments);"function"==typeof c[c.length-1]&&(a=c.pop()),"boolean"==typeof c[c.length-1]&&(b=c.pop());var e=new k(t(c,b),b);return a&&e.then(a),e}function t(a,b){for(var c,d=[],e=0;c=a[e];e++)"string"==typeof c&&(c=u(c)),N(c)&&(c=new l(t(c,b),b)),d.push(c);return d}function u(a){for(var b,c,d=0;c=s.matchers[d];d++){var e=c[0],f=c[1];if(b=a.match(e))return f(a)}throw new Error(a+" was not recognised by loader")}function v(){return a.using=I,a.provide=J,a.define=K,a.loadrunner=L,O}function w(a){for(var b=0;b<s.bundles.length;b++)for(var c in s.bundles[b])if(c!=a&&e(s.bundles[b][c],a)>-1)return c}for(var x,y,z,A,B=a.attachEvent&&!a.opera,C=b.getElementsByTagName("script"),D=0,E=b.createElement("script"),F={},G={},H={},I=a.using,J=a.provide,K=a.define,L=a.loadrunner,M=0;A=C[M];M++)if(A.src.match(/loadrunner\.js(\?|#|$)/)){x=A;break}var N=Array.isArray||function(a){return a.constructor==Array};h.prototype.then=function(b){return this.started||(this.started=!0,this.start()),this.completed?b.apply(a,this.results):(this.callbacks=this.callbacks||[],this.callbacks.push(b)),this},h.prototype.start=function(){},h.prototype.complete=function(){if(!this.completed&&(this.results=d(arguments),this.completed=!0,this.callbacks))for(var b,c=0;b=this.callbacks[c];c++)b.apply(a,this.results)},i.loaded=[],i.prototype=new h,i.prototype.start=function(){var a,b,c,d=this;return(c=G[this.id])?(c.then(function(){d.complete()}),this):((a=F[this.id])?a.then(function(){d.loaded()}):!this.force&&e(i.loaded,this.id)>-1?this.loaded():(b=w(this.id))?s(b,function(){d.loaded()}):this.load(),this)},i.prototype.load=function(){var b=this;F[this.id]=b;var c=E.cloneNode(!1);this.scriptId=c.id="LR"+ ++D,c.type="text/javascript",c.async=!0,c.onerror=function(){throw new Error(b.path+" not loaded")},c.onreadystatechange=c.onload=function(c){c=a.event||c,("load"==c.type||e(["loaded","complete"],this.readyState)>-1)&&(this.onreadystatechange=null,b.loaded())},c.src=this.path,z=this,C[0].parentNode.insertBefore(c,C[0]),z=null,H[c.id]=this},i.prototype.loaded=function(){this.complete()},i.prototype.complete=function(){-1==e(i.loaded,this.id)&&i.loaded.push(this.id),delete F[this.id],h.prototype.complete.apply(this,arguments)},j.exports={},j.prototype=new i,j.prototype.resolvePath=function(a){return f(s.path,a+".js")},j.prototype.start=function(){var a,b,c=this;this.body?this.execute():(a=j.exports[this.id])?this.exp(a):(b=G[this.id])?b.then(function(a){c.exp(a)}):(bundle=w(this.id))?s(bundle,function(){c.start()}):(G[this.id]=this,this.load())},j.prototype.loaded=function(){var a,b,c=this;B?(b=j.exports[this.id])?this.exp(b):(a=G[this.id])&&a.then(function(a){c.exp(a)}):(a=y,y=null,a.id=a.id||this.id,a.then(function(a){c.exp(a)}))},j.prototype.complete=function(){delete G[this.id],i.prototype.complete.apply(this,arguments)},j.prototype.execute=function(){var a=this;"object"==typeof this.body?this.exp(this.body):"function"==typeof this.body&&this.body.apply(window,[function(b){a.exp(b)}])},j.prototype.exp=function(a){this.complete(this.exports=j.exports[this.id]=a||{})},k.prototype=new h,k.prototype.start=function(){function a(){var a=[];d.collectResults&&(a[0]={});for(var b,e=0;b=d.deps[e];e++){if(!b.completed)return;b.results.length>0&&(d.collectResults?b instanceof l?c(a[0],b.results[0]):g(a[0],b.id,b.results[0]):a=a.concat(b.results))}d.complete.apply(d,a)}for(var b,d=this,e=0;b=this.deps[e];e++)b.then(a);return this},l.prototype=new h,l.prototype.start=function(){var a=this,b=0,d=[];return a.collectResults&&(d[0]={}),function e(){var f=a.deps[b++];f?f.then(function(){f.results.length>0&&(a.collectResults?f instanceof l?c(d[0],f.results[0]):g(d[0],f.id,f.results[0]):d.push(f.results[0])),e()}):a.complete.apply(a,d)}(),this},r.amd={};var O=function(a){return a(s,o,O,define)};O.Script=i,O.Module=j,O.Collection=k,O.Sequence=l,O.Dependency=h,O.noConflict=v,a.loadrunner=O,a.using=s,a.provide=o,a.define=r,s.path="",s.matchers=[],s.matchers.add=function(a,b){this.unshift([a,b])},s.matchers.add(/(^script!|\.js$)/,function(a){var b=new i(a.replace(/^\$/,s.path.replace(/\/$/,"")+"/").replace(/^script!/,""),!1);return b.id=a,b}),s.matchers.add(/^[a-zA-Z0-9_\-\/]+$/,function(a){return new j(a)}),s.bundles=[],x&&(s.path=window.__twttrLoadRunnerPath||x.getAttribute("data-path")||x.src.split(/loadrunner\.js/)[0]||"",(main=x.getAttribute("data-main"))&&s.apply(a,main.split(/\s*,\s*/)).then(function(){}))}(this,document),window.__twttrlr=loadrunner.noConflict(),__twttrlr(function(using,provide,loadrunner,define){provide("util/util",function(a){function b(a){return a&&String(a).toLowerCase().indexOf("[native code]")>-1}function c(a){return n(arguments,function(b){e(b,function(b,c){a[b]=c})}),a}function d(a){return e(a,function(b,c){i(c)&&(d(c),j(c)&&delete a[b]),(void 0===c||null===c||""===c)&&delete a[b]}),a}function e(a,b){for(var c in a)(!a.hasOwnProperty||a.hasOwnProperty(c))&&b(c,a[c]);return a}function f(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function g(a,b){return a==f(b)}function h(a,b,c){return c=c||[],function(){var d=p(arguments,function(a){return a});return a.apply(b,c.concat(d))}}function i(a){return a===Object(a)}function j(a){if(!i(a))return!1;if(Object.keys)return!Object.keys(a).length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function k(a,b){window.setTimeout(function(){a.call(b||null)},0)}function l(a){return Array.prototype.slice.call(a)}var m=function(){var a=Array.prototype.indexOf;return b(a)?function(b,c){return b?a.apply(b,[c]):-1}:function(a,b){if(!a)return-1;for(var c=0,d=a.length;d>c;c++)if(b==a[c])return c;return-1}}(),n=function(){var a=Array.prototype.forEach;return b(a)?function(b,c){b&&c&&a.apply(b,[c])}:function(a,b){if(a&&b)for(var c=0,d=a.length;d>c;c++)b(a[c],c)}}(),o=function(){var a=Array.prototype.filter;return b(a)?function(b,c){return b?c?a.apply(b,[c]):b:null}:function(a,b){if(!a)return null;if(!b)return a;for(var c=[],d=0,e=a.length;e>d;d++)b(a[d])&&c.push(a[d]);return c}}(),p=function(){var a=Array.prototype.map;return b(a)?function(b,c){return b?c?a.apply(b,[c]):b:null}:function(a,b){if(!a)return null;if(!b)return a;for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d]));return c}}(),q=function(){var a=Array.prototype.reduce;return b(a)?function(b,c,d){return b?c?a.apply(b,[c,d]):d:null}:function(a,b,c){if(!a)return null;if(!b)return c;for(var d=c,e=0,f=a.length;f>e;e++)d=b(d,a[e],e,a);return d}}(),r=function(){var a=String.prototype.trim;return b(a)?function(b){return b&&a.apply(b)}:function(a){return a&&a.replace(/(^\s+|\s+$)/g,"")}}(),s=b(Object.create)?Object.create:function(a){function b(){}return b.prototype=a,new b};a({aug:c,async:k,compact:d,forIn:e,forEach:n,filter:o,map:p,reduce:q,trim:r,indexOf:m,isNative:b,isObject:i,isEmptyObject:j,createObject:s,bind:h,toType:f,isType:g,toRealArray:l})}),provide("util/events",function(a){using("util/util",function(b){var c={bind:function(a,b){return this._handlers=this._handlers||{},this._handlers[a]=this._handlers[a]||[],this._handlers[a].push(b)},unbind:function(a,c){if(this._handlers[a])if(c){var d=b.indexOf(this._handlers[a],c);d>=0&&this._handlers[a].splice(d,1)}else this._handlers[a]=[]},trigger:function(a,c){var d=this._handlers&&this._handlers[a];c=c||{},c.type=a,b.forEach(d,function(a){b.async(b.bind(a,this,[c]))})}};a({Emitter:c})})}),provide("$xd/json2.js",function(exports){window.JSON||(window.JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,!b||"function"==typeof b||"object"==typeof b&&"number"==typeof b.length)return str("",{"":a});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),exports(),loadrunner.Script.loaded.push("$xd/json2.js")}),provide("util/querystring",function(a){function b(a){return encodeURIComponent(a).replace(/\+/g,"%2B").replace(/'/g,"%27")}function c(a){return decodeURIComponent(a)}function d(a){var c,d=[];for(c in a)null!==a[c]&&"undefined"!=typeof a[c]&&d.push(b(c)+"="+b(a[c]));return d.sort().join("&")}function e(a){var b,d,e,f,g={};if(a)for(b=a.split("&"),f=0;e=b[f];f++)d=e.split("="),2==d.length&&(g[c(d[0])]=c(d[1]));return g}function f(a,b){var c=d(b);return c.length>0?a.indexOf("?")>=0?a+"&"+d(b):a+"?"+d(b):a}function g(a){var b=a&&a.split("?");return 2==b.length?e(b[1]):{}}a({url:f,decodeURL:g,decode:e,encode:d,encodePart:b,decodePart:c})}),provide("util/twitter",function(a){using("util/querystring",function(b){function c(a){return"string"==typeof a&&m.test(a)&&RegExp.$1.length<=20}function d(a){return c(a)?RegExp.$1:void 0}function e(a,c){var e=b.decodeURL(a);return c=c||!1,e.screen_name=d(a),e.screen_name?b.url("https://twitter.com/intent/"+(c?"follow":"user"),e):void 0}function f(a){return e(a,!0)}function g(a){return"string"==typeof a&&q.test(a)}function h(a,b){return b=void 0===b?!0:b,g(a)?(b?"#":"")+RegExp.$1:void 0}function i(a){return"string"==typeof a&&n.test(a)}function j(a){return i(a)&&RegExp.$1}function k(a){return o.test(a)}function l(a){return p.test(a)}var m=/(?:^|(?:https?\:)?\/\/(?:www\.)?twitter\.com(?:\:\d+)?(?:\/intent\/(?:follow|user)\/?\?screen_name=|(?:\/#!)?\/))@?([\w]+)(?:\?|&|$)/i,n=/(?:^|(?:https?\:)?\/\/(?:www\.)?twitter\.com(?:\:\d+)?\/(?:#!\/)?[\w_]+\/status(?:es)?\/)(\d+)/i,o=/^http(s?):\/\/(\w+\.)*twitter\.com([\:\/]|$)/i,p=/^http(s?):\/\/pbs\.twimg\.com\//,q=/^#?([^.,<>!\s\/#\-\(\)\'\"]+)$/;a({isHashTag:g,hashTag:h,isScreenName:c,screenName:d,isStatus:i,status:j,intentForProfileURL:e,intentForFollowURL:f,isTwitterURL:k,isTwimgURL:l,regexen:{profile:m}})})}),provide("util/uri",function(a){using("util/querystring","util/util","util/twitter",function(b,c,d){function e(a,b){var c,d;return b=b||location,/^https?:\/\//.test(a)?a:/^\/\//.test(a)?b.protocol+a:(c=b.host+(b.port.length?":"+b.port:""),0!==a.indexOf("/")&&(d=b.pathname.split("/"),d.pop(),d.push(a),a="/"+d.join("/")),[b.protocol,"//",c,a].join(""))}function f(){for(var a,b=document.getElementsByTagName("link"),c=0;a=b[c];c++)if("canonical"==a.rel)return e(a.href)}function g(){for(var a,b,c,e=document.getElementsByTagName("a"),f=document.getElementsByTagName("link"),g=[e,f],h=0,i=0,j=/\bme\b/;a=g[h];h++)for(i=0;b=a[i];i++)if(j.test(b.rel)&&(c=d.screenName(b.href)))return c}a({absolutize:e,getCanonicalURL:f,getScreenNameFromPage:g})})}),provide("util/typevalidator",function(a){using("util/util",function(b){function c(a){return void 0!==a&&null!==a&&""!==a}function d(a){return f(a)&&a%1===0}function e(a){return f(a)&&!d(a)}function f(a){return c(a)&&!isNaN(a)}function g(a){return c(a)&&"array"==b.toType(a)}function h(a){if(!c(a))return!1;switch(a){case"on":case"ON":case"true":case"TRUE":return!0;case"off":case"OFF":case"false":case"FALSE":return!1;default:return!!a}}function i(a){return f(a)?a:void 0}function j(a){return e(a)?a:void 0}function k(a){return d(a)?a:void 0}a({hasValue:c,isInt:d,isFloat:e,isNumber:f,isArray:g,asInt:k,asFloat:j,asNumber:i,asBoolean:h})})}),provide("tfw/util/globals",function(a){using("util/typevalidator",function(b){function c(){var a,b,c=document.getElementsByTagName("meta"),d=0;for(f={};a=c[d];d++)/^twitter:/.test(a.name)&&(b=a.name.replace(/^twitter:/,""),f[b]=a.content)}function d(a){return f[a]}function e(a){return b.asBoolean(a)&&(f.dnt=!0),b.asBoolean(f.dnt)}var f;c(),a({init:c,val:d,dnt:e})})}),provide("dom/delegate",function(a){function b(a){var b=a.getAttribute("data-twitter-event-id");return b?b:(a.setAttribute("data-twitter-event-id",++m),m)}function c(a,b,c){var d=0,e=a&&a.length||0;for(d=0;e>d;d++)a[d].call(b,c)}function d(a,b,e){for(var f=e||a.target||a.srcElement,g=f.className.split(" "),h=0,i=g.length;i>h;h++)c(b["."+g[h]],f,a);c(b[f.tagName],f,a),a.cease||f!==this&&d.call(this,a,b,f.parentElement||f.parentNode)}function e(a,b,c){return a.addEventListener?void a.addEventListener(b,function(e){d.call(a,e,c[b])},!1):void(a.attachEvent&&a.attachEvent("on"+b,function(){d.call(a,a.ownerDocument.parentWindow.event,c[b])}))}function f(a,c,d,f){var g=b(a);l[g]=l[g]||{},l[g][c]||(l[g][c]={},e(a,c,l[g])),l[g][c][d]=l[g][c][d]||[],l[g][c][d].push(f)}function g(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,function(){c(window.event)})}function h(a,c,e){var f=b(c),g=l[f]&&l[f];d.call(c,{target:e},g[a])}function i(a){return k(a),j(a),!1}function j(a){a&&a.preventDefault?a.preventDefault():a.returnValue=!1}function k(a){a&&(a.cease=!0)&&a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}var l={},m=-1;a({stop:i,stopPropagation:k,preventDefault:j,delegate:f,on:g,simulate:h})}),provide("tfw/util/article",function(a){using("dom/delegate","tfw/util/globals","util/uri","$xd/json2.js",function(b,c,d){function e(){return f=d.getCanonicalURL()||""+document.location,window.top.postMessage?window==window.top?void b.on(window,"message",function(a){var b;if(!a.data||"{"==a.data[0]){try{b=JSON.parse(a.data)}catch(d){}b&&"twttr:private:requestArticleUrl"==b.name&&a.source.postMessage(JSON.stringify({name:"twttr:private:provideArticleUrl",data:{url:f,dnt:c.dnt()}}),"*")}}):(b.on(window,"message",function(a){var b;if(!a.data||"{"==a.data[0]){try{b=JSON.parse(a.data)}catch(d){}b&&"twttr:private:provideArticleUrl"==b.name&&(f=b.data&&b.data.url,c.dnt(b.data.dnt),g=document.location.href)}}),void window.top.postMessage(JSON.stringify({name:"twttr:private:requestArticleUrl"}),"*")):void 0}var f,g="";e(),a({url:function(){return f},frameUrl:function(){return g}})})}),provide("dom/get",function(a){using("util/util",function(b){function c(a,b,c){return e(a,b,c,1)[0]}function d(a,c,e){var f,g=c&&c.parentNode;if(g&&g!==e)return g.tagName==a?g:(f=g.className.split(" "),0===a.indexOf(".")&&~b.indexOf(f,a.slice(1))?g:d(a,g,e))}var e=function(){var a=document.getElementsByClassName;return b.isNative(a)?function(c,d,e,f){var g=d?d.getElementsByClassName(c):a.call(document,c),h=b.filter(g,function(a){return!e||a.tagName.toLowerCase()==e.toLowerCase()});return[].slice.call(h,0,f||h.length)}:function(a,c,d,e){var f,g,h,i,j,k,l,m,n=[];for(c=c||document,h=a.split(" "),k=h.length,f=c.getElementsByTagName(d||"*"),m=f.length,j=0;k>j&&m>0;j++){for(n=[],i=h[j],l=0;m>l&&(g=f[l],~b.indexOf(g.className.split(" "),i)&&n.push(g),j+1!=k||n.length!==e);l++);f=n,m=f.length}return n}}();a({all:e,one:c,ancestor:d})})}),provide("dom/classname",function(a){function b(a){return new RegExp("\\b"+a+"\\b","g")}function c(a,c){return a.classList?void a.classList.add(c):void(b(c).test(a.className)||(a.className+=" "+c))}function d(a,c){return a.classList?void a.classList.remove(c):void(a.className=a.className.replace(b(c)," "))}function e(a,b,e){return void 0===e&&a.classList&&a.classList.toggle?a.classList.toggle(b,e):(e?c(a,b):d(a,b),e)}function f(a,e,f){return a.classList&&g(a,e)?(d(a,e),void c(a,f)):void(a.className=a.className.replace(b(e),f))}function g(a,c){return a.classList?a.classList.contains(c):b(c).test(a.className)}a({add:c,remove:d,replace:f,toggle:e,present:g})}),provide("util/throttle",function(a){function b(a,b,c){function d(){var c=+new Date;return window.clearTimeout(e),c-g>b?(g=c,void a.call(f)):void(e=window.setTimeout(d,b))}var e,f=c||this,g=0;return d}a(b)}),provide("util/logger",function(a){using("util/util",function(b){function c(){i("info",b.toRealArray(arguments))}function d(){i("warn",b.toRealArray(arguments))}function e(){i("error",b.toRealArray(arguments))}function f(a){l&&(k[a]=h())}function g(a){var b;l&&(k[a]?(b=h(),c("_twitter",a,b-k[a])):e("timeEnd() called before time() for id: ",a))}function h(){return window.performance&&+window.performance.now()||+new Date}function i(a,b){if(window[j]&&window[j][a])switch(b.length){case 1:window[j][a](b[0]);break;case 2:window[j][a](b[0],b[1]);break;case 3:window[j][a](b[0],b[1],b[2]);break;case 4:window[j][a](b[0],b[1],b[2],b[3]);break;case 5:window[j][a](b[0],b[1],b[2],b[3],b[4]);break;default:0!==b.length&&window[j].warn&&window[j].warn("too many params passed to logger."+a)}}var j=["con","sole"].join(""),k={},l=!!~location.href.indexOf("tw_debug=true");a({info:c,warn:d,error:e,time:f,timeEnd:g})})}),provide("util/domready",function(a){function b(){f=1;for(var a=0,b=g.length;b>a;a++)g[a]()}var c,d,e,f=0,g=[],h=!1,i=document.createElement("a"),j="DOMContentLoaded",k="addEventListener",l="onreadystatechange";/^loade|c/.test(document.readyState)&&(f=1),document[k]&&document[k](j,d=function(){document.removeEventListener(j,d,h),b()},h),i.doScroll&&document.attachEvent(l,c=function(){/^c/.test(document.readyState)&&(document.detachEvent(l,c),b())}),e=i.doScroll?function(a){window.self!=window.top?f?a():g.push(a):!function(){try{i.doScroll("left")}catch(b){return setTimeout(function(){e(a)},50)}a()}()}:function(a){f?a():g.push(a)},a(e)}),provide("util/env",function(a){using("util/domready","util/typevalidator","util/logger","tfw/util/globals",function(b,c,d,e){function f(a){return a=a||window,a.devicePixelRatio?a.devicePixelRatio>=1.5:a.matchMedia?a.matchMedia("only screen and (min-resolution: 144dpi)").matches:!1}function g(a){return a=a||s,/(Trident|MSIE \d)/.test(a)}function h(a){return a=a||s,/MSIE 6/.test(a)}function i(a){return a=a||s,/MSIE 7/.test(a)}function j(a){return a=a||s,/MSIE 8/.test(a)}function k(a){return a=a||s,/MSIE 9/.test(a)}function l(a){return a=a||s,/(iPad|iPhone|iPod)/.test(a)}function m(a){return a=a||s,/^Mozilla\/5\.0 \(Linux; (U; )?Android/.test(a)}function n(){return t}function o(a,b){return a=a||window,b=b||s,a.postMessage&&(!g(b)||!a.opener)}function p(a){a=a||navigator;try{return!!a.plugins["Shockwave Flash"]||!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(b){return!1}}function q(a,b,c){return a=a||window,b=b||navigator,c=c||s,"ontouchstart"in a||/Opera Mini/.test(c)||b.msMaxTouchPoints>0}function r(){var a=document.body.style;return void 0!==a.transition||void 0!==a.webkitTransition||void 0!==a.mozTransition||void 0!==a.oTransition||void 0!==a.msTransition}var s=window.navigator.userAgent,t=!1,u=!1,v="twitter-csp-test";window.twttr=window.twttr||{},twttr.verifyCSP=function(a){var b=document.getElementById(v);u=!0,t=!!a,b&&b.parentNode.removeChild(b)},b(function(){var a;return h()||i()?t=!1:c.asBoolean(e.val("widgets:csp"))?t=!0:(a=document.createElement("script"),a.id=v,a.text="twttr.verifyCSP(false);",document.body.appendChild(a),window.setTimeout(function(){u||(d.warn('TWITTER: Content Security Policy restrictions may be applied to your site. Add <meta name="twitter:widgets:csp" content="on"> to supress this warning.'),d.warn("TWITTER: Please note: Not all embedded timeline and embedded Tweet functionality is supported when CSP is applied."))},5e3),void 0)}),a({retina:f,anyIE:g,ie6:h,ie7:i,ie8:j,ie9:k,ios:l,android:m,cspEnabled:n,flashEnabled:p,canPostMessage:o,touch:q,cssTransitions:r})})}),provide("util/css",function(a){using("util/util",function(b){a({sanitize:function(a,c,d){var e,f=/^[\w ,%\/"'\-_#]+$/,g=a&&b.map(a.split(";"),function(a){return b.map(a.split(":").slice(0,2),function(a){return b.trim(a)})}),h=0,i=[],j=d?"!important":"";for(c=c||/^(font|text\-|letter\-|color|line\-)[\w\-]*$/;g&&(e=g[h]);h++)e[0].match(c)&&e[1].match(f)&&i.push(e.join(":")+j);return i.join(";")}})})}),provide("tfw/util/params",function(a){using("util/querystring","util/twitter",function(b,c){a(function(a,d){return function(e){var f,g,h="data-tw-params";if(e&&c.isTwitterURL(e.href)&&!e.getAttribute(h)){if(e.setAttribute(h,!0),"function"==typeof d){f=d.call(this,e);for(g in f)f.hasOwnProperty(g)&&(a[g]=f[g])}e.href=b.url(e.href,a)}}})})}),provide("util/iframe",function(a){using("util/util",function(b){a(function(a,c,d){var e;if(d=d||document,a=a||{},c=c||{},a.name){try{e=d.createElement('<iframe name="'+a.name+'"></iframe>')}catch(f){e=d.createElement("iframe"),e.name=a.name}delete a.name}else e=d.createElement("iframe");return a.id&&(e.id=a.id,delete a.id),e.allowtransparency="true",e.scrolling="no",e.setAttribute("frameBorder",0),e.setAttribute("allowTransparency",!0),b.forIn(a,function(a,b){e.setAttribute(a,b)}),b.forIn(c,function(a,b){e.style[a]=b}),e})})}),provide("util/params",function(a){using("util/querystring",function(b){var c,d,e;c=function(a){var c=a.search.substr(1);return b.decode(c)},d=function(a){var c=a.href,d=c.indexOf("#"),e=0>d?"":c.substring(d+1);return b.decode(e)},e=function(a){var b,e={},f=c(a),g=d(a);for(b in f)f.hasOwnProperty(b)&&(e[b]=f[b]);for(b in g)g.hasOwnProperty(b)&&(e[b]=g[b]);return e},a({combined:e,fromQuery:c,fromFragment:d})})}),provide("tfw/util/env",function(a){using("util/params",function(b){function c(){var a=36e5,c=b.combined(document.location)._;return void 0!==d?d:(d=!1,c&&/^\d+$/.test(c)&&(d=+new Date-parseInt(c)<a),d)}var d;a({isDynamicWidget:c})})}),provide("util/promise",function(a){using("util/util",function(b){var c=function(a){try{var b=a.then;if("function"==typeof b)return!0}catch(c){}return!1},d=function(a){Error.call(this,a)};d.prototype=b.createObject(Error.prototype);var e=function(){var a=[];return a.pump=function(c){b.async(function(){for(var b=a.length,d=0;b>d;)d++,a.shift()(c)})},a},f=function(a,d,e,f,g,h){var i=!1,j=this,k=function(a){b.async(function(){h("fulfilled"),f(a),d.pump(a)})},l=function(a){b.async(function(){h("rejected"),g(a),e.pump(a)})},m=function(a){return c(a)?void a.then(m,l):void k(a)},n=function(a){return function(b){i||(i=!0,a(b))}};this.resolve=n(m,"resolve"),this.fulfill=n(k,"fulfill"),this.reject=n(l,"reject"),this.cancel=function(){j.reject(new Error("Cancel"))},this.timeout=function(){j.reject(new Error("Timeout"))},h("pending")},g=function(a){var b,c,d=new e,g=new e,h="pending";this._addAcceptCallback=function(a){d.push(a),"fulfilled"==h&&d.pump(b)},this._addRejectCallback=function(a){g.push(a),"rejected"==h&&g.pump(c)};var i=new f(this,d,g,function(a){b=a},function(a){c=a},function(a){h=a});try{a&&a(i)}catch(j){i.reject(j)}},h=function(a){return"function"==typeof a},i=function(a,c,d){return h(a)?function(){try{var b=a.apply(null,arguments);c.resolve(b)}catch(d){c.reject(d)}}:b.bind(c[d],c)},j=function(a,b,c){return h(a)&&c._addAcceptCallback(a),h(b)&&c._addRejectCallback(b),c};b.aug(g.prototype,{then:function(a,b){var c=this;return new g(function(d){j(i(a,d,"resolve"),i(b,d,"reject"),c)})},"catch":function(a){var b=this;return new g(function(c){j(null,i(a,c,"reject"),b)})}}),g.isThenable=c;var k=function(a){return b.map(a,g.resolve)};g.any=function(){var a=k(arguments);return new g(function(c){if(a.length){var d=!1,e=function(a){d||(d=!0,c.resolve(a))},f=function(a){d||(d=!0,c.reject(a))};b.forEach(a,function(a){a.then(e,f)})}else c.reject("No futures passed to Promise.any()")})},g.every=function(){var a=k(arguments);return new g(function(c){if(a.length){var d=new Array(a.length),e=0,f=function(b,f){e++,d[b]=f,e==a.length&&c.resolve(d)};b.forEach(a,function(a,d){a.then(b.bind(f,null,[d]),c.reject)})}else c.reject("No futures passed to Promise.every()")})},g.some=function(){var a=k(arguments);return new g(function(c){if(a.length){var d=0,e=function(){d++,d==a.length&&c.reject()};b.forEach(a,function(a){a.then(c.resolve,e)})}else c.reject("No futures passed to Promise.some()")})},g.fulfill=function(a){return new g(function(b){b.fulfill(a)})},g.resolve=function(a){return new g(function(b){b.resolve(a)})},g.reject=function(a){return new g(function(b){b.reject(a)})},a(g)})}),provide("util/donottrack",function(a){using("tfw/util/globals",function(b){a(function(a,c){var d=/\.(gov|mil)(:\d+)?$/i,e=/https?:\/\/([^\/]+).*/i;return a=a||document.referrer,a=e.test(a)&&RegExp.$1,c=c||document.location.host,b.dnt()?!0:d.test(c)?!0:a&&d.test(a)?!0:document.navigator?1==document.navigator.doNotTrack:navigator?1==navigator.doNotTrack||1==navigator.msDoNotTrack:!1
})})}),provide("sandbox/baseframe",function(a){using("util/domready","util/env","util/iframe","util/promise","util/util",function(b,c,d,e,f){function g(a,b,c,g){var h;this.readyPromise=new e(f.bind(function(a){this.resolver=a},this)),this.attrs=a||{},this.styles=b||{},this.appender=c||function(a){document.body.appendChild(a)},this.layout=g||function(a){return new e(function(b){return b.fulfill(a())})},this.frame=h=d(this.attrs,this.styles),h.onreadystatechange=h.onload=this.getCallback(this.onLoad),this.layout(f.bind(function(){this.appender(h)},this))}var h=0;window.twttr=window.twttr||{},window.twttr.sandbox=window.twttr.sandbox||{},g.prototype.getCallback=function(a){var b=this,c=!1;return function(){c||(c=!0,a.call(b))}},g.prototype.registerCallback=function(a){var b="cb"+h++;return window.twttr.sandbox[b]=a,b},g.prototype.onLoad=function(){try{this.document=this.frame.contentWindow.document}catch(a){return void this.setDocDomain()}this.writeStandardsDoc(),this.resolver.fulfill(this)},g.prototype.ready=function(){return this.readyPromise},g.prototype.setDocDomain=function(){var a=d(this.attrs,this.styles),b=this.registerCallback(this.getCallback(this.onLoad));a.src=["javascript:",'document.write("");',"try { window.parent.document; }","catch (e) {",'document.domain="'+document.domain+'";',"}",'window.parent.twttr.sandbox["'+b+'"]();'].join(""),this.layout(f.bind(function(){this.frame.parentNode.removeChild(this.frame),this.frame=null,this.appender?this.appender(a):document.body.appendChild(a),this.frame=a},this))},g.prototype.writeStandardsDoc=function(){if(c.anyIE()&&!c.cspEnabled()){var a=["<!DOCTYPE html>","<html>","<head>","<scr","ipt>","try { window.parent.document; }",'catch (e) {document.domain="'+document.domain+'";}',"</scr","ipt>","</head>","<body></body>","</html>"].join("");this.document.write(a),this.document.close()}},a(g)})}),provide("sandbox/minimal",function(a){using("sandbox/baseframe","util/env","util/promise","util/util",function(b,c,d,e){function f(a,b){a&&(this._frame=a,this._win=a.contentWindow,this._doc=this._win.document,this._body=this._doc.body,this._head=this._body.parentNode.children[0],this.layout=b)}e.aug(f.prototype,{createElement:function(a){return this._doc.createElement(a)},createDocumentFragment:function(){return this._doc.createDocumentFragment()},appendChild:function(a){return this.layout(e.bind(function(){return this._body.appendChild(a)},this))},setBaseTarget:function(a){var b=this._doc.createElement("base");return b.target=a,this.layout(e.bind(function(){return this._head.appendChild(b)},this))},setTitle:function(a){a&&(this._frame.title=a)},element:function(){return this._frame},document:function(){return this._doc}}),f.createSandbox=function(a,c,d,e){var g=new b(a,c,d,e);return g.ready().then(function(a){return new f(a.frame,a.layout)})},a(f)})}),provide("dom/cookie",function(a){using("util/util",function(b){a(function(a,c,d){var e,f,g,h,i=b.aug({},d);return arguments.length>1&&"[object Object]"!==String(c)?((null===c||void 0===c)&&(i.expires=-1),"number"==typeof i.expires&&(e=i.expires,f=new Date((new Date).getTime()+60*e*1e3),i.expires=f),c=String(c),document.cookie=[encodeURIComponent(a),"=",i.raw?c:encodeURIComponent(c),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")):(i=c||{},h=i.raw?function(a){return a}:decodeURIComponent,(g=new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?h(g[1]):null)})})}),provide("tfw/util/tracking",function(a){using("dom/cookie","dom/delegate","sandbox/minimal","util/donottrack","util/promise","util/querystring","tfw/util/env","util/iframe","util/util","$xd/json2.js",function(b,c,d,e,f,g,h,i,j){function k(){return G?H:(d.createSandbox({id:"rufous-sandbox"},{display:"none"}).then(j.bind(function(a){D=a,B=x(),C=y(),E.fulfill([B,C])},this)),G=!0,H)}function l(a,b,c,d){var e=!j.isObject(a),f=b?!j.isObject(b):!1;e||f||o(t(a),u(b,c,d),!0)}function m(a,b,c,d,e){var f=n(a.target||a.srcElement);f.action=e||"click",l(f,b,c,d)}function n(a,b){var c;return b=b||{},a&&1===a.nodeType?((c=a.getAttribute("data-scribe"))&&j.forEach(c.split(" "),function(a){var c=j.trim(a).split(":"),d=c[0],e=c[1];d&&e&&!b[d]&&(b[d]=e)}),n(a.parentNode,b)):b}function o(a,b,c){var d,e,f,h,i;j.isObject(a)&&j.isObject(b)&&(f=j.aug({},b,{event_namespace:a}),c?(h={l:A(f)},f.dnt&&(h.dnt=1),z(g.url(I,h))):(d=B.firstChild,d.value=+(+d.value||f.dnt||0),i=A(f),e=D.createElement("input"),e.type="hidden",e.name="l",e.value=i,B.appendChild(e)))}function p(a,b,c,d){var e=!j.isObject(a),f=b?!j.isObject(b):!1;e||f||H.then(function(){o(t(a),u(b,c,d))})}function q(a,b){j.isObject(a)&&H.then(function(){o(t(j.aug({action:"impression"},a)),v(b))})}function r(){return H.then(function(){if(B.children.length<=2)return f.reject();var a=f.every(D.appendChild(B),D.appendChild(C)).then(function(a){var b=a[0],d=a[1];return c.on(d,"load",function(){s(b,d)(),twttr.events.trigger("logFlushed")}),b.submit(),a});return B=x(),C=y(),a})}function s(a,b){return function(){var c=a.parentNode;c&&(c.removeChild(a),c.removeChild(b))}}function t(a){return j.aug({client:"tfw"},a||{})}function u(a,b,c){var d=a&&a.widget_origin||document.referrer;return a=w("tfw_client_event",a,c||e(d)),a.format_version=1,b||(a.widget_origin=d),a}function v(a){return w("syndicated_impression",{},a)}function w(a,b,c){return b=b||{},j.aug(b,{_category_:a,triggered_on:b.triggered_on||+new Date,dnt:!!c})}function x(){var a=D.createElement("form"),b=D.createElement("input"),c=D.createElement("input");return F++,a.action=I,a.method="POST",a.target="rufous-frame-"+F,a.id="rufous-form-"+F,b.type="hidden",b.name="dnt",b.value=0,c.type="hidden",c.name="tfw_redirect",c.value=J,a.appendChild(b),a.appendChild(c),a}function y(){var a="rufous-frame-"+F;return i({id:a,name:a,width:0,height:0,border:0},{display:"none"},D.document())}function z(a){var b=new Image;b.src=a}function A(a){var b,c=Array.prototype.toJSON;return delete Array.prototype.toJSON,b=JSON.stringify(a),c&&(Array.prototype.toJSON=c),b}var B,C,D,E,F=0,G=!1,H=new f(function(a){E=a}),I="https://syndication.twitter.com/i/jot/syndication",J="https://platform.twitter.com/jot.html";twttr.widgets&&twttr.widgets.endpoints&&(I=twttr.widgets.endpoints.rufous||I,J=twttr.widgets.endpoints.rufousRedirect||J),a({enqueue:p,enqueueAudienceImpression:q,flush:r,initPostLogging:k,scribeInteraction:m,extractTermsFromDOM:n,addPixel:l})})}),provide("tfw/util/media",function(a){using("dom/delegate","dom/get","util/util","util/env","util/twitter",function(b,c,d,e,f){function g(a,b){return 2==a||3==a&&0===+b}function h(a){var b=a.split(" ");this.url=decodeURIComponent(d.trim(b[0])),this.width=+d.trim(b[1].replace(/w$/,""))}function i(a,b,c){var e,f,g,i;if(a=window.devicePixelRatio?a*window.devicePixelRatio:a,f=d.map(b.split(","),function(a){return new h(a)}),c)for(i=0;i<f.length;i++)f[i].url===c&&(e=f[i]);return g=d.reduce(f,function(b,c){return c.width<b.width&&c.width>=a?c:b},f[0]),e&&e.width>g.width?e:g}function j(a,b){var c,d=a.getAttribute("data-srcset"),e=a.src;d&&(c=i(b,d,e),a.src=c.url)}function k(a,b){b=b||e.retina(),b&&d.forEach(a.getElementsByTagName("IMG"),function(a){var b=a.getAttribute("data-src-2x");b&&(a.src=b)})}function l(a,b,e,f){var h=0,i=e?600:375,k=c.one("multi-photo",a,"DIV"),l=k&&+k.getAttribute("data-photo-count");if(a)return d.forEach(c.all("autosized-media",a),function(a){var c=m(a.getAttribute("data-width"),a.getAttribute("data-height"),b,i);f(function(){j(a,b),a.width=c.width,a.height=c.height,n(a,c)}),h=c.height>h?c.height:h}),d.forEach(c.all("cropped-media",a,"IMG"),function(a){var c,d,e,k=b-12,n=a.parentNode,r=a.getAttribute("data-crop-x")||0,s=a.getAttribute("data-crop-y")||0,t=g(l,a.getAttribute("data-image-index")),u=Math.floor(k/2-o),v=Math.floor(u/(t?p:q));t||(v-=o/2),e=m(a.getAttribute("data-width"),a.getAttribute("data-height"),u,i,u,v),c=e.width-u-r,d=e.height-v-s,0>c&&Math.max(0,r+=c),0>d&&Math.max(0,s+=d),f(function(){j(a,u),a.width=e.width,a.height=e.height,n.style.width=u-1+"px",n.style.height=v+"px",r&&(a.style.marginLeft="-"+Math.floor(e.width*r/100)+"px"),s&&(a.style.marginTop="-"+Math.floor(e.height*s/100)+"px")}),h=e.height*(t?2:1)>h?e.height:h}),h}function m(a,b,c,d,e,f){return c=c||a,d=d||b,e=e||0,f=f||0,a>c&&(b*=c/a,a=c),b>d&&(a*=d/b,b=d),e>a&&(b*=e/a,a=e),f>b&&(a*=f/b,b=f),{width:Math.floor(a),height:Math.floor(b)}}function n(a,c){function d(){var a={name:"tfw:resize",dimensions:c};h.postMessage(a,"*")}var g,h,i,j,k;a&&(h=a.contentWindow,g=a.ownerDocument&&a.ownerDocument.defaultView,i=e.ios()||e.android(),j=f.isTwitterURL(a.src),k=h&&e.canPostMessage(h),i&&j&&k&&(d(),g&&b.on(g,"message",function(a){"tfw:requestsize"===a.data&&d()})))}var o=6,p=8/9,q=16/9;a({scaleDimensions:m,retinize:k,constrainMedia:l,__setSrcFromSet:j})})}),provide("tfw/util/data",function(a){using("util/logger","util/util","util/querystring",function(b,c,d){function e(a){return function(c){c.error?a.error&&a.error(c):c.headers&&200!=c.headers.status?(a.error&&a.error(c),b.warn(c.headers.message)):a.success&&a.success(c),a.complete&&a.complete(c),f(a)}}function f(a){var b=a.script;b&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),a.script=void 0,b=void 0),a.callbackName&&twttr.tfw.callbacks[a.callbackName]&&delete twttr.tfw.callbacks[a.callbackName]}function g(a){var b={};return a.success&&c.isType("function",a.success)&&(b.success=a.success),a.error&&c.isType("function",a.error)&&(b.error=a.error),a.complete&&c.isType("function",a.complete)&&(b.complete=a.complete),b}window.twttr=window.twttr||{},twttr.tfw=twttr.tfw||{},twttr.tfw.callbacks=twttr.tfw.callbacks||{};var h="twttr.tfw.callbacks",i=twttr.tfw.callbacks,j="cb",k=0,l=!1,m={},n={tweets:"https://syndication.twitter.com/tweets.json",timeline:"https://cdn.syndication.twimg.com/widgets/timelines/",timelinePoll:"https://syndication.twitter.com/widgets/timelines/paged/",timelinePreview:"https://syndication.twitter.com/widgets/timelines/preview/"};twttr.widgets&&twttr.widgets.endpoints&&c.aug(n,twttr.widgets.endpoints),m.jsonp=function(a,b,c){var f=c||j+k,g=h+"."+f,m=document.createElement("script"),n={callback:g,suppress_response_codes:!0};i[f]=e(b),(l||!/^https?\:$/.test(window.location.protocol))&&(a=a.replace(/^\/\//,"https://")),m.src=d.url(a,n),m.async="async",document.body.appendChild(m),b.script=m,b.callbackName=f,c||k++},m.config=function(a){(a.forceSSL===!0||a.forceSSL===!1)&&(l=a.forceSSL)},m.tweets=function(a){var b=arguments[0],c=g(b),e={ids:a.ids.join(","),lang:a.lang},f=d.url(n.tweets,e);this.jsonp(f,c)},m.timeline=function(a){var b,e=arguments[0],f=g(e),h=9e5,i=Math.floor(+new Date/h),j={lang:a.lang,t:i,domain:window.location.host,dnt:a.dnt,override_type:a.overrideType,override_id:a.overrideId,override_name:a.overrideName,override_owner_id:a.overrideOwnerId,override_owner_name:a.overrideOwnerName,with_replies:a.withReplies};c.compact(j),b=d.url(n.timeline+a.id,j),this.jsonp(b,f,"tl_"+a.id+"_"+a.instanceId)},m.timelinePoll=function(a){var b,e=arguments[0],f=g(e),h={lang:a.lang,since_id:a.sinceId,max_id:a.maxId,min_position:a.minPosition,max_position:a.maxPosition,domain:window.location.host,dnt:a.dnt,override_type:a.overrideType,override_id:a.overrideId,override_name:a.overrideName,override_owner_id:a.overrideOwnerId,override_owner_name:a.overrideOwnerName,with_replies:a.withReplies};c.compact(h),b=d.url(n.timelinePoll+a.id,h),this.jsonp(b,f,"tlPoll_"+a.id+"_"+a.instanceId+"_"+(a.sinceId||a.maxId||a.maxPosition||a.minPosition))},m.timelinePreview=function(a){var b=arguments[0],c=g(b),e=a.params,f=d.url(n.timelinePreview,e);this.jsonp(f,c)},a(m)})}),provide("anim/transition",function(a){function b(a,b){var c;return b=b||window,(c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.msRequestAnimationFrame||b.oRequestAnimationFrame||function(){b.setTimeout(function(){a(+new Date)},1e3/60)})(a)}function c(a,b){return Math.sin(Math.PI/2*b)*a}function d(a,c,d,e,f){function g(){var i=+new Date,j=i-h,k=Math.min(j/d,1),l=e?e(c,k):c*k;a(l),1!=k&&b(g,f)}var h=+new Date;b(g)}a({animate:d,requestAnimationFrame:b,easeOut:c})}),provide("util/datetime",function(a){using("util/util",function(b){function c(a){return 10>a?"0"+a:a}function d(a){function b(a,b){return e&&e[a]&&(a=e[a]),a.replace(/%\{([\w_]+)\}/g,function(a,c){return void 0!==b[c]?b[c]:a})}var e=a&&a.phrases,f=a&&a.months||h,g=a&&a.formats||i;this.timeAgo=function(a){var c,e=d.parseDate(a),h=+new Date,i=h-e;return e?isNaN(i)||2*j>i?b("now"):k>i?(c=Math.floor(i/j),b(g.abbr,{number:c,symbol:b(n,{abbr:b("s"),expanded:b(c>1?"seconds":"second")})})):l>i?(c=Math.floor(i/k),b(g.abbr,{number:c,symbol:b(n,{abbr:b("m"),expanded:b(c>1?"minutes":"minute")})})):m>i?(c=Math.floor(i/l),b(g.abbr,{number:c,symbol:b(n,{abbr:b("h"),expanded:b(c>1?"hours":"hour")})})):365*m>i?b(g.shortdate,{day:e.getDate(),month:b(f[e.getMonth()])}):b(g.longdate,{day:e.getDate(),month:b(f[e.getMonth()]),year:e.getFullYear().toString().slice(2)}):""},this.localTimeStamp=function(a){var e=d.parseDate(a),h=e&&e.getHours();return e?b(g.full,{day:e.getDate(),month:b(f[e.getMonth()]),year:e.getFullYear(),hours24:c(h),hours12:13>h?h?h:"12":h-12,minutes:c(e.getMinutes()),seconds:c(e.getSeconds()),amPm:b(12>h?"AM":"PM")}):""}}var e=/(\d{4})-?(\d{2})-?(\d{2})T(\d{2}):?(\d{2}):?(\d{2})(Z|[\+\-]\d{2}:?\d{2})/,f=/[a-z]{3,4} ([a-z]{3}) (\d{1,2}) (\d{1,2}):(\d{2}):(\d{2}) ([\+\-]\d{2}:?\d{2}) (\d{4})/i,g=/^\d+$/,h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i={abbr:"%{number}%{symbol}",shortdate:"%{day} %{month}",longdate:"%{day} %{month} %{year}",full:"%{hours12}:%{minutes} %{amPm} - %{day} %{month} %{year}"},j=1e3,k=60*j,l=60*k,m=24*l,n='<abbr title="%{expanded}">%{abbr}</abbr>';d.parseDate=function(a){var c,d,i=a||"",j=i.toString();return c=function(){var a;return g.test(j)?parseInt(j,10):(a=j.match(f))?Date.UTC(a[7],b.indexOf(h,a[1]),a[2],a[3],a[4],a[5]):(a=j.match(e))?Date.UTC(a[1],a[2]-1,a[3],a[4],a[5],a[6]):void 0}(),c?(d=new Date(c),!isNaN(d.getTime())&&d):!1},a(d)})}),provide("sandbox/frame",function(a){using("sandbox/baseframe","sandbox/minimal","util/env","util/promise","util/util",function(b,c,d,e,f){function g(){var a,b;m={},j||(a=document.body.offsetHeight,b=document.body.offsetWidth,(a!=o||b!=n)&&(f.forEach(l,function(a){a.dispatchFrameResize(n,o)}),o=a,n=b))}function h(a){var b;return a.id?a.id:(b=a.getAttribute("data-twttr-id"))?b:(b="twttr-sandbox-"+k++,a.setAttribute("data-twttr-id",b),b)}function i(a,b){c.apply(this,[a,b]),this._resizeHandlers=[],l.push(this),this._win.addEventListener?this._win.addEventListener("resize",f.bind(function(){this.dispatchFrameResize()},this),!0):this._win.attachEvent("onresize",f.bind(function(){this.dispatchFrameResize(this._win.event)},this))}var j,k=0,l=[],m={},n=0,o=0;window.addEventListener?window.addEventListener("resize",g,!0):document.body.attachEvent("onresize",function(){g(window.event)}),i.prototype=new c,f.aug(i.prototype,{dispatchFrameResize:function(){var a=this._frame.parentNode,b=h(a),c=m[b];j=!0,this._resizeHandlers.length&&(c||(c=m[b]={w:this._frame.offsetWidth,h:this._frame.offsetHeight}),(this._frameWidth!=c.w||this._frameHeight!=c.h)&&(this._frameWidth=c.w,this._frameHeight=c.h,f.forEach(this._resizeHandlers,function(a){a(c.w,c.h)}),window.setTimeout(function(){m={}},50)))},appendStyleSheet:function(a){var b=this._doc.createElement("link");return b.type="text/css",b.rel="stylesheet",b.href=a,this.layout(f.bind(function(){return this._head.appendChild(b)},this))},appendCss:function(a){var b;return d.cspEnabled()?e.reject("CSP enabled; cannot embed inline styles."):(b=this._doc.createElement("style"),b.type="text/css",b.styleSheet?b.styleSheet.cssText=a:b.appendChild(this._doc.createTextNode(a)),this.layout(f.bind(function(){return this._head.appendChild(b)},this)))},style:function(a){return this.layout(f.bind(function(){f.forIn(a,f.bind(function(a,b){this._frame.style[a]=b},this))},this))},onresize:function(a){this._resizeHandlers.push(a)},width:function(a){return void 0!==a&&(this._frame.style.width=a+"px"),d.ios()?Math.min(this._frame.parentNode.offsetWidth,this._frame.offsetWidth):this._frame.offsetWidth},height:function(a){return void 0!==a&&(this._frame.height=a),this._frame.offsetHeight}}),i.createSandbox=function(a,c,d,e){var f=new b(a,c,d,e);return f.ready().then(function(a){return new i(a.frame,a.layout)})},a(i)})}),provide("dom/size",function(a){function b(a){return a&&1===a.nodeType?a.offsetWidth||b(a.parentNode):0}a({effectiveWidth:b})}),provide("tfw/util/assets",function(a){using("util/env",function(b){function c(a,c){var e,f=d[a];return e=b.retina()?"2x":b.ie6()||b.ie7()?"gif":"default",c&&(e+=".rtl"),f[e]}var d={"embed/timeline.css":{"default":"embed/timeline.3fb0c4c981cd3f8f8dfb6b0ab93d6a9e.default.css","2x":"embed/timeline.3fb0c4c981cd3f8f8dfb6b0ab93d6a9e.2x.css",gif:"embed/timeline.3fb0c4c981cd3f8f8dfb6b0ab93d6a9e.gif.css","default.rtl":"embed/timeline.3fb0c4c981cd3f8f8dfb6b0ab93d6a9e.default.rtl.css","2x.rtl":"embed/timeline.3fb0c4c981cd3f8f8dfb6b0ab93d6a9e.2x.rtl.css","gif.rtl":"embed/timeline.3fb0c4c981cd3f8f8dfb6b0ab93d6a9e.gif.rtl.css"}};a(c)})}),provide("util/layout",function(a){using("util/promise",function(b){function c(){}var d,e=[];c.prototype.enqueue=function(a,c){return new b(function(b){e.push({action:a,resolver:b,note:c})})},c.prototype.exec=function(){var a,b=e;if(b.length)for(e=[];b.length;)a=b.shift(),a&&a.action?a.resolver.fulfill(a.action()):a.resolver.reject()},c.prototype.delayedExec=function(){d&&window.clearTimeout(d),d=window.setTimeout(this.exec,100)},a(c)})}),provide("tfw/widget/base",function(a){using("dom/get","util/domready","util/iframe","util/layout","util/promise","util/querystring","util/typevalidator","util/util","tfw/util/globals","util/logger",function(b,c,d,e,f,g,h,i,j,k){function l(a){var b;a&&(a.ownerDocument?(this.srcEl=a,this.classAttr=a.className.split(" ")):(this.srcOb=a,this.classAttr=[]),b=this.params(),this.id=this.generateId(),this.setLanguage(),this.related=b.related||this.dataAttr("related"),this.partner=b.partner||this.dataAttr("partner")||j.val("partner"),this.dnt=b.dnt||this.dataAttr("dnt")||j.dnt()||"",this.styleAttr=[],this.targetEl=a.targetEl,this.completePromise=new f(i.bind(function(a){this.completeResolver=a},this)),this.completed().then(function(a){a&&a!=document.body&&twttr.events.trigger("rendered",{target:a})}))}function m(){i.forEach(r,function(a){a()}),l.doLayout()}function n(a){return a?a.lang?a.lang:n(a.parentNode):void 0}var o,p=0,q={list:[],byId:{}},r=[],s=new e,t="data-twttr-rendered",u={ar:{"%{followers_count} followers":"  %{followers_count}","100K+":"+100 ","10k unit":"10  ",Follow:"","Follow %{screen_name}":" %{screen_name}",K:"",M:"",Tweet:"","Tweet %{hashtag}":" %{hashtag}","Tweet to %{name}":"  %{name}"},bn:{"Follow %{screen_name}":"%{screen_name}-  "},cs:{"Follow %{screen_name}":"Sledovat uivatele %{screen_name}"},da:{"%{followers_count} followers":"%{followers_count} flgere","10k unit":"10k enhed",Follow:"Flg","Follow %{screen_name}":"Flg %{screen_name}","Tweet to %{name}":"Tweet til %{name}"},de:{"%{followers_count} followers":"%{followers_count} Follower","100K+":"100Tsd+","10k unit":"10tsd-Einheit",Follow:"Folgen","Follow %{screen_name}":"%{screen_name} folgen",K:"Tsd",Tweet:"Twittern","Tweet to %{name}":"Tweet an %{name}"},es:{"%{followers_count} followers":"%{followers_count} seguidores","10k unit":"unidad de 10 mil",Follow:"Seguir","Follow %{screen_name}":"Seguir a %{screen_name}",Tweet:"Twittear","Tweet %{hashtag}":"Twittear %{hashtag}","Tweet to %{name}":"Twittear a %{name}"},fa:{"%{followers_count} followers":"%{followers_count} ","100K+":">","10k unit":" ",Follow:" ","Follow %{screen_name}":"  %{screen_name}",K:"",M:"",Tweet:"","Tweet %{hashtag}":"  %{hashtag}","Tweet to %{name}":" %{name}  "},fi:{"%{followers_count} followers":"%{followers_count} seuraajaa","100K+":"100 000+","10k unit":"10 000 yksikk",Follow:"Seuraa","Follow %{screen_name}":"Seuraa kyttj %{screen_name}",K:"tuhatta",M:"milj.",Tweet:"Twiittaa","Tweet %{hashtag}":"Twiittaa %{hashtag}","Tweet to %{name}":"Twiittaa kyttjlle %{name}"},fil:{"%{followers_count} followers":"%{followers_count} mga tagasunod","10k unit":"10k yunit",Follow:"Sundan","Follow %{screen_name}":"Sundan si %{screen_name}",Tweet:"I-tweet","Tweet %{hashtag}":"I-tweet ang %{hashtag}","Tweet to %{name}":"Mag-Tweet kay %{name}"},fr:{"%{followers_count} followers":"%{followers_count} abonns","10k unit":"unit de 10k",Follow:"Suivre","Follow %{screen_name}":"Suivre %{screen_name}",Tweet:"Tweeter","Tweet %{hashtag}":"Tweeter %{hashtag}","Tweet to %{name}":"Tweeter  %{name}"},he:{"%{followers_count} followers":"%{followers_count} ","100K+":" ","10k unit":" ",Follow:"","Follow %{screen_name}":"  %{screen_name}",K:"",M:"",Tweet:"","Tweet %{hashtag}":" %{hashtag}","Tweet to %{name}":"  %{name}"},hi:{"%{followers_count} followers":"%{followers_count} ","100K+":"1   ","10k unit":"10  ",Follow:"","Follow %{screen_name}":"%{screen_name}   ",K:"",M:"",Tweet:"","Tweet %{hashtag}":" %{hashtag}","Tweet to %{name}":"%{name}    "},hu:{"%{followers_count} followers":"%{followers_count} kvet","100K+":"100E+","10k unit":"10E+",Follow:"Kvets","Follow %{screen_name}":"%{screen_name} kvetse",K:"E","Tweet %{hashtag}":"%{hashtag} tweetelse","Tweet to %{name}":"Tweet kldse neki: %{name}"},id:{"%{followers_count} followers":"%{followers_count} pengikut","100K+":"100 ribu+","10k unit":"10 ribu unit",Follow:"Ikuti","Follow %{screen_name}":"Ikuti %{screen_name}",K:"&nbsp;ribu",M:"&nbsp;juta","Tweet to %{name}":"Tweet ke %{name}"},it:{"%{followers_count} followers":"%{followers_count} follower","10k unit":"10k unit",Follow:"Segui","Follow %{screen_name}":"Segui %{screen_name}","Tweet %{hashtag}":"Twitta %{hashtag}","Tweet to %{name}":"Twitta a %{name}"},ja:{"%{followers_count} followers":"%{followers_count}","100K+":"100K","10k unit":"",Follow:"","Follow %{screen_name}":"%{screen_name}",Tweet:"","Tweet %{hashtag}":"%{hashtag} ","Tweet to %{name}":"%{name}"},ko:{"%{followers_count} followers":"%{followers_count} ","100K+":"100 ","10k unit":" ",Follow:"","Follow %{screen_name}":"%{screen_name}  ",K:"",M:"",Tweet:"","Tweet %{hashtag}":"%{hashtag}  ","Tweet to %{name}":"%{name}  "},msa:{"%{followers_count} followers":"%{followers_count} pengikut","100K+":"100 ribu+","10k unit":"10 ribu unit",Follow:"Ikut","Follow %{screen_name}":"Ikut %{screen_name}",K:"ribu",M:"juta","Tweet to %{name}":"Tweet kepada %{name}"},nl:{"%{followers_count} followers":"%{followers_count} volgers","100K+":"100k+","10k unit":"10k-eenheid",Follow:"Volgen","Follow %{screen_name}":"%{screen_name} volgen",K:"k",M:" mln.",Tweet:"Tweeten","Tweet %{hashtag}":"%{hashtag} tweeten","Tweet to %{name}":"Tweeten naar %{name}"},no:{"%{followers_count} followers":"%{followers_count} flgere","100K+":"100 K+","10k unit":"10-K-enhet",Follow:"Flg","Follow %{screen_name}":"Flg %{screen_name}","Tweet to %{name}":"Send en tweet til %{name}"},pl:{"%{followers_count} followers":"%{followers_count} obserwujcych","100K+":"100 tys.+","10k unit":"10 tys.",Follow:"Obserwuj","Follow %{screen_name}":"Obserwuj %{screen_name}",K:"tys.",M:"mln",Tweet:"Tweetnij","Tweet %{hashtag}":"Tweetnij %{hashtag}","Tweet to %{name}":"Tweetnij do %{name}"},pt:{"%{followers_count} followers":"%{followers_count} seguidores","100K+":"+100 mil","10k unit":"10 mil unidades",Follow:"Seguir","Follow %{screen_name}":"Seguir %{screen_name}",K:"Mil",Tweet:"Tweetar","Tweet %{hashtag}":"Tweetar %{hashtag}","Tweet to %{name}":"Tweetar para %{name}"},ro:{"Follow %{screen_name}":"Urmrete pe %{screen_name}"},ru:{"%{followers_count} followers":": %{followers_count} ","100K+":"100 .+","10k unit":" 10k",Follow:"","Follow %{screen_name}":" %{screen_name}",K:".",M:".",Tweet:"","Tweet %{hashtag}":" %{hashtag}","Tweet to %{name}":" %{name}"},sv:{"%{followers_count} followers":"%{followers_count} fljare","10k unit":"10k",Follow:"Flj","Follow %{screen_name}":"Flj %{screen_name}",Tweet:"Tweeta","Tweet %{hashtag}":"Tweeta %{hashtag}","Tweet to %{name}":"Tweeta till %{name}"},th:{"%{followers_count} followers":"%{followers_count} ","100K+":"100+","10k unit":" 10",Follow:"","Follow %{screen_name}":" %{screen_name}",M:"",Tweet:"","Tweet %{hashtag}":" %{hashtag}","Tweet to %{name}":" %{name}"},tr:{"%{followers_count} followers":"%{followers_count} takipi","100K+":"+100 bin","10k unit":"10 bin birim",Follow:"Takip et","Follow %{screen_name}":"Takip et: %{screen_name}",K:"bin",M:"milyon",Tweet:"Tweetle","Tweet %{hashtag}":"Tweetle: %{hashtag}","Tweet to %{name}":"Tweetle: %{name}"},uk:{"Follow %{screen_name}":" %{screen_name}"},ur:{"%{followers_count} followers":"%{followers_count} ","100K+":"   ","10k unit":"  ",Follow:" ","Follow %{screen_name}":"%{screen_name}   ",K:"",M:"",Tweet:" ","Tweet %{hashtag}":"%{hashtag}  ","Tweet to %{name}":"%{name}   "},vi:{"Follow %{screen_name}":"Theo di %{screen_name}"},"zh-cn":{"%{followers_count} followers":"%{followers_count} ","100K+":"10+","10k unit":"1",Follow:"","Follow %{screen_name}":" %{screen_name}",K:"",M:"",Tweet:"","Tweet %{hashtag}":" %{hashtag} ","Tweet to %{name}":" %{name}"},"zh-tw":{"%{followers_count} followers":"%{followers_count} ","100K+":"","10k unit":"1 ",Follow:"","Follow %{screen_name}":" %{screen_name}",K:"",M:"",Tweet:"","Tweet %{hashtag}":"%{hashtag}","Tweet to %{name}":"%{name}"}};i.aug(l.prototype,{setLanguage:function(a){var b;return a||(a=this.params().lang||this.dataAttr("lang")||n(this.srcEl)),(a=a&&a.toLowerCase())?u[a]?this.lang=a:(b=a.replace(/[\-_].*/,""),u[b]?this.lang=b:void(this.lang="en")):this.lang="en"},_:function(a,b){var c=this.lang;return b=b||{},c&&u.hasOwnProperty(c)||(c=this.lang="en"),a=u[c]&&u[c][a]||a,this.ringo(a,b,/%\{([\w_]+)\}/g)},ringo:function(a,b,c){return c=c||/\{\{([\w_]+)\}\}/g,a.replace(c,function(a,c){return void 0!==b[c]?b[c]:a})},add:function(a){q.list.push(this),q.byId[this.id]=a},create:function(a,b,c){var e,g=this;return c[t]=!0,e=d(i.aug({id:this.id,src:a,"class":this.classAttr.join(" ")},c),b,this.targetEl&&this.targetEl.ownerDocument),this.srcEl?this.layout(function(){return g.srcEl.parentNode.replaceChild(e,g.srcEl),g.completeResolver.fulfill(e),e}):this.targetEl?this.layout(function(){return g.targetEl.appendChild(e),g.completeResolver.fulfill(e),e}):f.reject("Did not append widget")},params:function(){var a,b;return this.srcOb?b=this.srcOb:(a=this.srcEl&&this.srcEl.href&&this.srcEl.href.split("?")[1],b=a?g.decode(a):{}),this.params=function(){return b},b},dataAttr:function(a){return this.srcEl&&this.srcEl.getAttribute("data-"+a)},attr:function(a){return this.srcEl&&this.srcEl.getAttribute(a)},layout:function(a){return s.enqueue(a)},styles:{base:[["font","normal normal normal 11px/18px 'Helvetica Neue', Arial, sans-serif"],["margin","0"],["padding","0"],["whiteSpace","nowrap"]],button:[["fontWeight","bold"],["textShadow","0 1px 0 rgba(255,255,255,.5)"]],large:[["fontSize","13px"],["lineHeight","26px"]],vbubble:[["fontSize","16px"]]},width:function(){throw new Error(name+" not implemented")},height:function(){return"m"==this.size?20:28},minWidth:function(){},maxWidth:function(){},minHeight:function(){},maxHeight:function(){},dimensions:function(){function a(a){switch(typeof a){case"string":return a;case"undefined":return;default:return a+"px"}}var b={width:this.width(),height:this.height()};return this.minWidth()&&(b["min-width"]=this.minWidth()),this.maxWidth()&&(b["max-width"]=this.maxWidth()),this.minHeight()&&(b["min-height"]=this.minHeight()),this.maxHeight()&&(b["max-height"]=this.maxHeight()),i.forIn(b,function(c,d){b[c]=a(d)}),b},generateId:function(){return this.srcEl&&this.srcEl.id||"twitter-widget-"+p++},completed:function(){return this.completePromise}}),l.afterLoad=function(a){r.push(a)},l.doLayout=function(){s.exec()},l.doLayoutAsync=function(){s.delayedExec()},l.init=function(a){o=a},l.find=function(a){return a&&q.byId[a]?q.byId[a].element:null},l.embed=function(a){var c=o.widgets,d=[],e=[],g=[];h.isArray(a)||(a=[a||document]),k.time("sandboxes"),i.forEach(a,function(a){i.forIn(c,function(c,e){var f,h;c.match(/\./)?(f=c.split("."),h=b.all(f[1],a,f[0])):h=a.getElementsByTagName(c),i.forEach(h,function(a){var b;a.getAttribute(t)||(a.setAttribute(t,"true"),b=new e(a),d.push(b),g.push(b.sandboxCreated))})})}),f.every.apply(null,g).then(function(){k.timeEnd("sandboxes")}),l.doLayout(),i.forEach(d,function(a){q.byId[a.id]=a,q.list.push(a),e.push(a.completed()),a.render(o)}),f.every.apply(null,e).then(function(a){a=i.filter(a,function(a){return a}),a.length&&(twttr.events.trigger("loaded",{widgets:a}),k.timeEnd("load"))}),l.doLayoutAsync(),m()},window.setInterval(function(){l.doLayout()},500),a(l)})}),provide("tfw/widget/intent",function(a){using("tfw/widget/base","util/util","util/querystring","util/uri","util/promise",function(b,c,d,e,f){function g(a){var b=Math.round(t/2-q/2),c=0;s>r&&(c=Math.round(s/2-r/2)),window.open(a,void 0,[p,"width="+q,"height="+r,"left="+b,"top="+c].join(","))}function h(a,b){using("tfw/hub/client",function(c){c.openIntent(a,b)})}function i(a){var b=~location.host.indexOf("poptip.com")?"https://poptip.com":location.href,c="original_referer="+b;return[a,c].join(-1==a.indexOf("?")?"?":"&")}function j(a){var b,d,e;if(a=a||window.event,b=a.target||a.srcElement,!(a.altKey||a.metaKey||a.shiftKey)){for(;b&&!~c.indexOf(["A","AREA"],b.nodeName);)b=b.parentNode;b&&b.href&&(d=b.href.match(o),d&&(e=i(b.href),e=e.replace(/^http[:]/,"https:"),e=e.replace(/^\/\//,"https://"),k(e,b),a.returnValue=!1,a.preventDefault&&a.preventDefault()))}}function k(a,b){if(twttr.events.hub&&b){var c=new l(n.generateId(),b);n.add(c),h(a,b),twttr.events.trigger("click",{target:b,region:"intent",type:"click",data:{}})}else g(a)}function l(a,b){this.id=a,this.element=this.srcEl=b}function m(a){this.srcEl=[],this.element=a}var n,o=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/,p="scrollbars=yes,resizable=yes,toolbar=no,location=yes",q=550,r=520,s=screen.height,t=screen.width;m.prototype=new b,c.aug(m.prototype,{render:function(){return n=this,window.__twitterIntentHandler||(document.addEventListener?document.addEventListener("click",j,!1):document.attachEvent&&document.attachEvent("onclick",j),window.__twitterIntentHandler=!0),f.fulfill(document.body)}}),m.open=k,a(m)})}),provide("tfw/widget/syndicatedbase",function(a){using("tfw/widget/base","tfw/widget/intent","tfw/util/assets","tfw/util/globals","tfw/util/media","tfw/util/tracking","dom/classname","dom/get","dom/delegate","dom/size","sandbox/frame","util/env","util/promise","util/twitter","util/typevalidator","util/util",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){u=s.VALID_COLOR.test(e.val("widgets:link-color"))&&RegExp.$1,w=s.VALID_COLOR.test(e.val("widgets:border-color"))&&RegExp.$1,v=e.val("widgets:theme")}function s(a){if(a){var c;this.readyPromise=new n(q.bind(function(a){this.readyResolver=a},this)),this.renderedPromise=new n(q.bind(function(a){this.renderResolver=a},this)),b.apply(this,[a]),c=this.params(),this.targetEl=this.srcEl&&this.srcEl.parentNode||c.targetEl||document.body,this.predefinedWidth=s.VALID_UNIT.test(c.width||this.attr("width"))&&RegExp.$1,this.layout(q.bind(function(){return this.containerWidth=k.effectiveWidth(this.targetEl)
},this)).then(q.bind(function(a){var b=this.predefinedWidth||a||this.dimensions.DEFAULT_WIDTH;this.height=s.VALID_UNIT.test(c.height||this.attr("height"))&&RegExp.$1,this.width=Math.max(this.dimensions.MIN_WIDTH,Math.min(b,this.dimensions.DEFAULT_WIDTH))},this)),this.linkColor=s.VALID_COLOR.test(c.linkColor||this.dataAttr("link-color"))?RegExp.$1:u,this.borderColor=s.VALID_COLOR.test(c.borderColor||this.dataAttr("border-color"))?RegExp.$1:w,this.theme=c.theme||this.attr("data-theme")||v,this.theme=/(dark|light)/.test(this.theme)?this.theme:"",this.classAttr.push(m.touch()?"is-touch":"not-touch"),m.ie9()&&this.classAttr.push("ie9"),this.sandboxCreated=l.createSandbox({"class":this.renderedClassNames,id:this.id},{width:"1px",height:"0px",border:"none",position:"absolute",visibility:"hidden"},q.bind(function(a){this.srcEl?this.targetEl.insertBefore(a,this.srcEl):this.targetEl.appendChild(a)},this),this.layout).then(q.bind(function(a){this.setupSandbox(a)},this))}}function t(a,b){return a+b}var u,v,w,x=[".customisable",".customisable:link",".customisable:visited",".customisable:hover",".customisable:focus",".customisable:active",".customisable-highlight:hover",".customisable-highlight:focus","a:hover .customisable-highlight","a:focus .customisable-highlight"],y=["a:hover .ic-mask","a:focus .ic-mask"],z=[".customisable-border"],A=[".timeline-header h1.summary",".timeline-header h1.summary a:link",".timeline-header h1.summary a:visited"],B={TWEET:0,RETWEET:10};s.prototype=new b,q.aug(s.prototype,{setupSandbox:function(a){this.sandbox=a,n.some(a.appendCss("body{display:none}"),a.setBaseTarget("_blank"),a.appendStyleSheet(twttr.widgets.config.assetUrl()+"/"+d("embed/timeline.css"))).then(q.bind(function(){this.readyResolver.fulfill(a)},this))},ready:function(){return this.readyPromise},rendered:function(){return this.renderedPromise},contentWidth:function(a){var b=this.dimensions,c=this.fullBleedPhoto?0:this.chromeless&&this.narrow?b.NARROW_MEDIA_PADDING_CL:this.chromeless?b.WIDE_MEDIA_PADDING_CL:this.narrow?b.NARROW_MEDIA_PADDING:b.WIDE_MEDIA_PADDING;return(a||this.width)-c},addSiteStyles:function(){var a=q.bind(function(a){return("dark"==this.theme?".thm-dark ":"")+a},this),b=[];return this.headingStyle&&b.push(q.map(A,a).join(",")+"{"+this.headingStyle+"}"),this.linkColor&&(b.push(q.map(x,a).join(",")+"{color:"+this.linkColor+"}"),b.push(q.map(y,a).join(",")+"{background-color:"+this.linkColor+"}")),this.borderColor&&b.push(q.map(z,a).concat("dark"==this.theme?[".thm-dark.customisable-border"]:[]).join(",")+"{border-color:"+this.borderColor+"}"),b.length?this.sandbox.appendCss(b.join("")):void 0},setNarrow:function(){var a=this.narrow;return this.narrow=this.width<this.dimensions.NARROW_WIDTH,a!=this.narrow?this.layout(q.bind(function(){return h.toggle(this.element,"var-narrow",this.narrow)},this)):n.fulfill(this.narrow)},bindIntentHandlers:function(){function a(a){var c=i.ancestor(".tweet",this,d),e=q.aug({},b.baseScribeData(),{item_ids:[],item_details:b.extractTweetScribeDetails(c)});q.forIn(e.item_details,function(a){e.item_ids.push(a)}),g.scribeInteraction(a,e,!0,b.dnt)}var b=this,d=this.element;j.delegate(d,"click","A",a),j.delegate(d,"click","BUTTON",a),j.delegate(d,"click",".profile",function(){b.addUrlParams(this)}),j.delegate(d,"click",".follow-button",function(a){var d;a.altKey||a.metaKey||a.shiftKey||m.ios()||m.android()||p.asBoolean(this.getAttribute("data-age-gate"))||(d=o.intentForFollowURL(this.href,!0),d&&(c.open(d,b.sandbox.element()),j.preventDefault(a)))}),j.delegate(d,"click",".web-intent",function(a){b.addUrlParams(this),a.altKey||a.metaKey||a.shiftKey||(c.open(this.href,b.sandbox.element()),j.preventDefault(a))})},baseScribeData:function(){return{}},extractTweetScribeDetails:function(a){var b,c,d={};return a?(b=a.getAttribute("data-tweet-id"),c=a.getAttribute("data-rendered-tweet-id")||b,c==b?d[c]={item_type:B.TWEET}:b&&(d[c]={item_type:B.RETWEET,target_type:B.TWEET,target_id:b}),d):d},constrainMedia:function(a,b){return f.constrainMedia(a||this.element,b||this.contentWidth(),this.fullBleedPhoto,this.layout)},collapseRegions:function(){q.forEach(i.all("collapsible-container",this.element),q.bind(function(a){var b,c,d=a.children,e=d.length&&a.offsetWidth,f=d.length&&q.map(d,function(a){return a.offsetWidth}),g=d.length;if(d.length)for(;g>0;){if(g--,b=q.reduce(f,t,0),!e||!b)return;if(e>b)return;c=d[g].getAttribute("data-collapsed-class"),c&&(h.add(this.element,c),f[g]=d[g].offsetWidth)}},this))}}),s.VALID_UNIT=/^([0-9]+)( ?px)?$/,s.VALID_COLOR=/^(#(?:[0-9a-f]{3}|[0-9a-f]{6}))$/i,r(),a(s)})}),provide("tfw/widget/timeline",function(a){using("tfw/widget/base","tfw/widget/syndicatedbase","util/datetime","util/promise","anim/transition","tfw/util/article","tfw/util/data","tfw/util/media","tfw/util/tracking","tfw/util/params","util/css","util/env","util/throttle","util/twitter","util/querystring","util/typevalidator","util/util","dom/delegate","dom/classname","dom/get",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a){if(a){var b,d,e,f,g,h,i,j;c.apply(this,[a]),b=this.params(),d=(b.chrome||this.dataAttr("chrome")||"").split(" "),this.preview=b.previewParams,this.widgetId=b.widgetId||this.dataAttr("widget-id"),this.instanceId=++O,this.cursors={maxPosition:0,minPosition:0},this.override=(f=b.screenName||this.dataAttr("screen-name"))||(g=b.userId||this.dataAttr("user-id"))?{overrideType:"user",overrideId:g,overrideName:f,withReplies:q.asBoolean(b.showReplies||this.dataAttr("show-replies"))?"true":"false"}:(f=b.favoritesScreenName||this.dataAttr("favorites-screen-name"))||(g=b.favoritesUserId||this.dataAttr("favorites-user-id"))?{overrideType:"favorites",overrideId:g,overrideName:f}:((f=b.listOwnerScreenName||this.dataAttr("list-owner-screen-name"))||(g=b.listOwnerId||this.dataAttr("list-owner-id")))&&((h=b.listId||this.dataAttr("list-id"))||(i=b.listSlug||this.dataAttr("list-slug")))?{overrideType:"list",overrideOwnerId:g,overrideOwnerName:f,overrideId:h,overrideName:i}:(j=b.customTimelineId||this.dataAttr("custom-timeline-id"))?{overrideType:"custom",overrideId:j}:{},this.tweetLimit=q.asInt(b.tweetLimit||this.dataAttr("tweet-limit")),this.staticTimeline=this.tweetLimit>0,d.length&&(e=~r.indexOf(d,"none"),this.chromeless=e||~r.indexOf(d,"transparent"),this.headerless=e||~r.indexOf(d,"noheader"),this.footerless=e||~r.indexOf(d,"nofooter"),this.borderless=e||~r.indexOf(d,"noborders"),this.noscrollbar=~r.indexOf(d,"noscrollbar")),this.headingStyle=l.sanitize(b.headingStyle||this.dataAttr("heading-style"),void 0,!0),this.classAttr.push("twitter-timeline-rendered"),this.ariaPolite=b.ariaPolite||this.dataAttr("aria-polite")}}var w="1.0",x={CLIENT_SIDE_USER:0,CLIENT_SIDE_APP:2},y="timeline",z="new-tweets-bar",A="timeline-header",B="timeline-footer",C="stream",D="h-feed",E="tweet",F="expanded",G="detail-expander",H="expand",I="permalink",J="twitter-follow-button",K="no-more-pane",L="pending-scroll-in",M="pending-new-tweet",N="pending-new-tweet-display",O=0;v.prototype=new c,r.aug(v.prototype,{renderedClassNames:"twitter-timeline twitter-timeline-rendered",dimensions:{DEFAULT_HEIGHT:"600",DEFAULT_WIDTH:"520",NARROW_WIDTH:"320",MIN_WIDTH:"180",MIN_HEIGHT:"200",WIDE_MEDIA_PADDING:81,NARROW_MEDIA_PADDING:16,WIDE_MEDIA_PADDING_CL:60,NARROW_MEDIA_PADDING_CL:12},create:function(a){var c,d,f,g,h=this.sandbox.createElement("div"),k=[];return h.innerHTML=a.body,(c=h.children[0]||!1)?(this.reconfigure(a.config),this.discardStaticOverflow(c),this.sandbox.setTitle(c.getAttribute("data-iframe-title")||"Timeline"),i.retinize(c),this.constrainMedia(c),this.searchQuery=c.getAttribute("data-search-query"),this.profileId=c.getAttribute("data-profile-id"),this.timelineType=c.getAttribute("data-timeline-type"),g=this.getTweetDetails(u.one(D,h)),r.forIn(g,function(a){k.push(a)}),f=this.baseScribeData(),f.item_ids=k,f.item_details=g,this.timelineType&&j.enqueue({page:this.timelineType+"_timeline",component:"timeline",element:"initial",action:k.length?"results":"no_results"},f,!0,this.dnt),j.enqueue({page:"timeline",component:"timeline",element:"initial",action:k.length?"results":"no_results"},f,!0,this.dnt),j.enqueueAudienceImpression({page:"timeline"},this.dnt),j.flush(),"assertive"==this.ariaPolite&&(d=u.one(z,c,"DIV"),d.setAttribute("aria-polite","assertive")),c.id=this.id,c.className+=" "+this.classAttr.join(" "),c.lang=this.lang,this.augmentWidgets(c),this.ready().then(r.bind(function(a){a.appendChild(c).then(r.bind(function(){this.renderResolver.fulfill(this.sandbox)},this)),a.style({cssText:"",border:"none",maxWidth:"100%",minWidth:this.dimensions.MIN_WIDTH+"px"}),this.layout(r.bind(function(){this.srcEl&&this.srcEl.parentNode&&this.srcEl.parentNode.removeChild(this.srcEl),this.predefinedWidth=this.width,this.predefinedHeight=this.height,this.width=a.width(this.width),this.height=a.height(this.height)},this)).then(r.bind(function(){var c=[];this.width<this.predefinedWidth&&c.push(this.layout(r.bind(function(){this.width=a.width(this.predefinedWidth)},this))),this.height<this.predefinedHeight&&c.push(this.layout(r.bind(function(){this.height=a.height(this.predefinedHeight),this.recalculateStreamHeight()},this))),c.length&&b.doLayoutAsync(),c.push(e.fulfill()),e.every.apply(null,c).then(r.bind(function(){this.setNarrow(),this.sandbox.onresize(r.bind(this.handleResize,this)),this.completeResolver.fulfill(this.sandbox.element())},this))},this))},this)),c):void 0},render:function(a,c){return this.preview||this.widgetId?(this.rendered().then(this.staticTimeline?r.bind(function(a){this.layout(r.bind(function(){a.height(this.height=this.element.offsetHeight)},this)),b.doLayoutAsync()},this):r.bind(function(){this.recalculateStreamHeight(),b.doLayoutAsync()},this)),this.preview?this.getPreviewTimeline():this.getTimeline(),c&&this.completed().then(c),this.completed()):(this.completeResolver.reject(400),this.completed())},getPreviewTimeline:function(){h.timelinePreview({success:r.bind(function(a){this.ready().then(r.bind(function(){this.element=this.create(a),this.readTranslations(),this.bindInteractions(),this.updateCursors(a.headers,{initial:!0}),b.doLayoutAsync()},this))},this),error:r.bind(function(a){return a&&a.headers?void this.completeResolver.reject(a.headers.status):void this.completeResolver.fulfill(this.srcEl)},this),params:this.preview})},getTimeline:function(){j.initPostLogging(),h.timeline(r.aug({id:this.widgetId,instanceId:this.instanceId,dnt:this.dnt,lang:this.lang,success:r.bind(function(a){this.ready().then(r.bind(function(){this.element=this.create(a),this.readTranslations(),this.bindInteractions(),this.updateTimeStamps(),this.updateCursors(a.headers,{initial:!0}),a.headers.xPolling&&/\d/.test(a.headers.xPolling)&&(this.pollInterval=1e3*a.headers.xPolling),this.staticTimeline||this.schedulePolling(),b.doLayoutAsync()},this))},this),error:r.bind(function(a){return a&&a.headers?void this.completeResolver.reject(a.headers.status):void this.completeResolver.fulfill(this.srcEl)},this)},this.override))},reconfigure:function(a){this.lang=a.lang,this.theme||(this.theme=a.theme),"dark"==this.theme&&this.classAttr.push("thm-dark"),this.chromeless&&this.classAttr.push("var-chromeless"),this.borderless&&this.classAttr.push("var-borderless"),this.headerless&&this.classAttr.push("var-headerless"),this.footerless&&this.classAttr.push("var-footerless"),this.staticTimeline&&this.classAttr.push("var-static"),!this.linkColor&&a.linkColor&&c.VALID_COLOR.test(a.linkColor)&&(this.linkColor=RegExp.$1),!this.height&&c.VALID_UNIT.test(a.height)&&(this.height=RegExp.$1),this.height=Math.max(this.dimensions.MIN_HEIGHT,this.height?this.height:this.dimensions.DEFAULT_HEIGHT),this.preview&&this.classAttr.push("var-preview"),this.narrow=this.width<=this.dimensions.NARROW_WIDTH,this.narrow&&this.classAttr.push("var-narrow"),this.addSiteStyles()},getTweetDetails:function(a){var b,c={};return b=a&&a.children||[],r.forEach(b,r.bind(function(a){r.aug(c,this.extractTweetScribeDetails(a))},this)),c},baseScribeData:function(){return{widget_id:this.widgetId,widget_origin:g.url(),client_version:w,message:this.partner,query:this.searchQuery,profile_id:this.profileId}},bindInteractions:function(){var a=this,b=this.element,c=!0;this.bindIntentHandlers(),s.delegate(b,"click",".load-tweets",function(b){c&&(c=!1,a.forceLoad(),s.stop(b))}),s.delegate(b,"click",".display-sensitive-image",function(c){a.showNSFW(u.ancestor("."+E,this,b)),s.stop(c)}),s.delegate(b,"mouseover","."+y,function(){a.mouseOver=!0}),s.delegate(b,"mouseout","."+y,function(){a.mouseOver=!1}),s.delegate(b,"mouseover","."+z,function(){a.mouseOverNotifier=!0}),s.delegate(b,"mouseout","."+z,function(){a.mouseOverNotifier=!1,window.setTimeout(function(){a.hideNewTweetNotifier()},3e3)}),this.staticTimeline||(s.delegate(b,"click","."+H,function(c){c.altKey||c.metaKey||c.shiftKey||(a.toggleExpando(u.ancestor("."+E,this,b)),s.stop(c))}),s.delegate(b,"click","A",function(a){s.stopPropagation(a)}),s.delegate(b,"click",".with-expansion",function(b){a.toggleExpando(this),s.stop(b)}),s.delegate(b,"click",".load-more",function(){a.loadMore()}),s.delegate(b,"click","."+z,function(){a.scrollToTop(),a.hideNewTweetNotifier(!0)}))},scrollToTop:function(){var a=u.one(C,this.element,"DIV");a.scrollTop=0,a.focus()},update:function(){var a=this,b=u.one(D,this.element),c=b&&b.children[0],d=c&&c.getAttribute("data-tweet-id");this.updateTimeStamps(),this.requestTweets(d,!0,function(b){b.childNodes.length>0&&a.insertNewTweets(b)})},loadMore:function(){var a=this,b=u.all(E,this.element,"LI").pop(),c=b&&b.getAttribute("data-tweet-id");this.requestTweets(c,!1,function(b){var d=u.one(K,a.element,"P"),e=b.childNodes[0];return d.style.cssText="",e&&e.getAttribute("data-tweet-id")==c&&b.removeChild(e),b.childNodes.length>0?void a.appendTweets(b):(t.add(a.element,"no-more"),void d.focus())})},forceLoad:function(){var a=this,b=!!u.all(D,this.element,"OL").length;this.requestTweets(1,!0,function(c){c.childNodes.length&&(a[b?"insertNewTweets":"appendTweets"](c),t.add(a.element,"has-tweets"))})},schedulePolling:function(a){var b=this;null!==this.pollInterval&&(a=twttr.widgets.poll||a||this.pollInterval||1e4,a>-1&&window.setTimeout(function(){this.isUpdating||b.update(),b.schedulePolling()},a))},updateCursors:function(a,b){(b||{}).initial?(this.cursors.maxPosition=a.maxPosition,this.cursors.minPosition=a.minPosition):(b||{}).newer?this.cursors.maxPosition=a.maxPosition||this.cursors.maxPosition:this.cursors.minPosition=a.minPosition||this.cursors.minPosition},requestTweets:function(a,b,c){var d=this,e={id:this.widgetId,instanceId:this.instanceId,screenName:this.widgetScreenName,userId:this.widgetUserId,withReplies:this.widgetShowReplies,dnt:this.dnt,lang:this.lang};b&&this.cursors.maxPosition?e.minPosition=this.cursors.maxPosition:!b&&this.cursors.minPosition?e.maxPosition=this.cursors.minPosition:b?e.sinceId=a:e.maxId=a,e.complete=function(){this.isUpdating=!1},e.error=function(a){if(a&&a.headers){if("404"==a.headers.status)return void(d.pollInterval=null);if("503"==a.headers.status)return void(d.pollInterval*=1.5)}},e.success=function(a){var e,f,g=d.sandbox.createDocumentFragment(),h=d.sandbox.createElement("ol"),k=[];if(d.updateCursors(a.headers,{newer:b}),a&&a.headers&&a.headers.xPolling&&/\d+/.test(a.headers.xPolling)&&(d.pollInterval=1e3*a.headers.xPolling),a&&void 0!==a.body){if(h.innerHTML=a.body,h.children[0]&&"LI"!=h.children[0].tagName)return;for(f=d.getTweetDetails(h),r.forIn(f,function(a){k.push(a)}),k.length&&(e=d.baseScribeData(),e.item_ids=k,e.item_details=f,e.event_initiator=b?x.CLIENT_SIDE_APP:x.CLIENT_SIDE_USER,this.timelineType&&j.enqueue({page:this.timelineType+"_timeline",component:"timeline",element:"initial",action:k.length?"results":"no_results"},e,!0,this.dnt),j.enqueue({page:"timeline",component:"timeline",element:b?"newer":"older",action:"results"},e,!0,d.dnt),j.flush()),i.retinize(h),d.constrainMedia(h);h.children[0];)g.appendChild(h.children[0]);c(g)}},h.timelinePoll(r.aug(e,this.override))},insertNewTweets:function(a){var b,c=this,d=u.one(C,this.element,"DIV"),e=u.one(D,d,"OL"),g=e.offsetHeight;return e.insertBefore(a,e.firstChild),b=e.offsetHeight-g,twttr.events.trigger("timelineUpdated",{target:this.sandbox.element(),region:"newer"}),d.scrollTop>40||this.mouseIsOver()?(d.scrollTop=d.scrollTop+b,this.updateTimeStamps(),this.showNewTweetNotifier(),void 0):(t.remove(this.element,L),e.style.cssText="margin-top: -"+b+"px",window.setTimeout(function(){d.scrollTop=0,t.add(c.element,L),m.cssTransitions()?e.style.cssText="":f.animate(function(a){e.style.cssText=b>a?"margin-top: -"+(b-a)+"px":""},b,500,f.easeOut)},500),this.updateTimeStamps(),"custom"!=this.timelineType&&this.gcTweets(50),void 0)},appendTweets:function(a){var b=u.one(C,this.element,"DIV"),c=u.one(D,b,"OL");c.appendChild(a),this.updateTimeStamps(),twttr.events.trigger("timelineUpdated",{target:this.sandbox.element(),region:"older"})},gcTweets:function(a){var b,c=u.one(D,this.element,"OL"),d=c.children.length;for(a=a||50;d>a&&(b=c.children[d-1]);d--)c.removeChild(b)},showNewTweetNotifier:function(){var a=this,b=u.one(z,this.element,"DIV"),c=b.children[0];b.style.cssText="",b.removeChild(c),b.appendChild(c),t.add(this.element,N),window.setTimeout(function(){t.add(a.element,M)},10),this.newNoticeDisplayTime=+new Date,window.setTimeout(function(){a.hideNewTweetNotifier()},5e3)},hideNewTweetNotifier:function(a){var b=this;(a||!this.mouseOverNotifier)&&(t.remove(this.element,M),window.setTimeout(function(){t.remove(b.element,N)},500))},augmentWidgets:function(a){var b=u.one(J,a,"A");b&&(b.setAttribute("data-related",this.related),b.setAttribute("data-partner",this.partner),b.setAttribute("data-dnt",this.dnt),b.setAttribute("data-search-query",this.searchQuery),b.setAttribute("data-profile-id",this.profileId),this.width<250&&b.setAttribute("data-show-screen-name","false"),twttr.widgets.load(b.parentNode))},discardStaticOverflow:function(a){var b,c=u.one(D,a,"OL");if(this.staticTimeline)for(this.height=0;b=c.children[this.tweetLimit];)c.removeChild(b)},hideStreamScrollBar:function(){var a,b=u.one(C,this.element,"DIV"),c=u.one(D,this.element,"OL");b.style.width="",a=this.element.offsetWidth-c.offsetWidth,a>0&&(b.style.width=this.element.offsetWidth+a+"px")},readTranslations:function(){var a=this.element,b="data-dt-";this.datetime=new d(r.compact({phrases:{now:a.getAttribute(b+"now"),s:a.getAttribute(b+"s"),m:a.getAttribute(b+"m"),h:a.getAttribute(b+"h"),second:a.getAttribute(b+"second"),seconds:a.getAttribute(b+"seconds"),minute:a.getAttribute(b+"minute"),minutes:a.getAttribute(b+"minutes"),hour:a.getAttribute(b+"hour"),hours:a.getAttribute(b+"hours")},months:a.getAttribute(b+"months").split("|"),formats:{abbr:a.getAttribute(b+"abbr"),shortdate:a.getAttribute(b+"short"),longdate:a.getAttribute(b+"long")}}))},updateTimeStamps:function(){for(var a,b,c,d,e=u.all(I,this.element,"A"),f=0;a=e[f];f++)c=a.getAttribute("data-datetime"),d=c&&this.datetime.timeAgo(c,this.i18n),b=a.getElementsByTagName("TIME")[0],d&&(b&&b.innerHTML?b.innerHTML=d:a.innerHTML=d)},mouseIsOver:function(){return this.mouseOver},addUrlParams:function(a){var b=this,c={tw_w:this.widgetId,related:this.related,partner:this.partner,query:this.searchQuery,profile_id:this.profileId,original_referer:g.url(),tw_p:"embeddedtimeline"};return this.addUrlParams=k(c,function(a){var c=u.ancestor("."+E,a,b.element);return c&&{tw_i:c.getAttribute("data-tweet-id")}}),this.addUrlParams(a)},showNSFW:function(a){var b,c,d,e,f,g,h=u.one("nsfw",a,"DIV"),j=0;h&&(c=i.scaleDimensions(h.getAttribute("data-width"),h.getAttribute("data-height"),this.contentWidth(),h.getAttribute("data-height")),b=!!(e=h.getAttribute("data-player")),b?f=this.sandbox.createElement("iframe"):(f=this.sandbox.createElement("img"),e=h.getAttribute(m.retina()?"data-image-2x":"data-image"),f.alt=h.getAttribute("data-alt"),g=this.sandbox.createElement("a"),g.href=h.getAttribute("data-href"),g.appendChild(f)),f.title=h.getAttribute("data-title"),f.src=e,f.width=c.width,f.height=c.height,d=u.ancestor("."+G,h,a),j=c.height-h.offsetHeight,h.parentNode.replaceChild(b?f:g,h),d.style.cssText="height:"+(d.offsetHeight+j)+"px")},toggleExpando:function(a){var c,d,e=u.one(G,a,"DIV"),f=e&&e.children[0],g=f&&f.getAttribute("data-expanded-media"),h=0,j=u.one(H,a,"A"),k=j&&j.getElementsByTagName("B")[0],l=k&&(k.innerText||k.textContent);if(k)return this.layout(function(){k.innerHTML=j.getAttribute("data-toggled-text"),j.setAttribute("data-toggled-text",l)}),t.present(a,F)?(this.layout(function(){t.remove(a,F)}),e?(this.layout(function(){e.style.cssText="",f.innerHTML=""}),void b.doLayout()):void b.doLayout()):(g&&(c=this.sandbox.createElement("DIV"),c.innerHTML=g,i.retinize(c),h=this.constrainMedia(c),this.layout(function(){f.appendChild(c)})),e&&this.layout(function(){d=Math.max(f.offsetHeight,h),e.style.cssText="height:"+d+"px"}),this.layout(function(){t.add(a,F)}),b.doLayout(),void 0)},recalculateStreamHeight:function(a){var b=u.one(A,this.element,"DIV"),c=u.one(B,this.element,"DIV"),d=u.one(C,this.element,"DIV");this.layout(r.bind(function(){var e=b.offsetHeight+(c?c.offsetHeight:0),f=a||this.sandbox.height();d.style.cssText="height:"+(f-e-2)+"px",this.noscrollbar&&this.hideStreamScrollBar()},this))},handleResize:function(a,c){var d=Math.min(this.dimensions.DEFAULT_WIDTH,Math.max(this.dimensions.MIN_WIDTH,Math.min(this.predefinedWidth||this.dimensions.DEFAULT_WIDTH,a)));(d!=this.width||c!=this.height)&&(this.width=d,this.height=c,this.setNarrow(),this.constrainMedia(this.element,this.contentWidth(d)),this.staticTimeline?this.layout(r.bind(function(){this.height=this.element.offsetHeight,this.sandbox.height(this.height),twttr.events.trigger("resize",{target:this.sandbox.element()})},this)):(this.recalculateStreamHeight(c),twttr.events.trigger("resize",{target:this.sandbox.element()})),b.doLayoutAsync())}}),a(v)})}),provide("tfw/widget/embed",function(a){using("tfw/widget/base","tfw/widget/syndicatedbase","util/datetime","tfw/util/params","dom/classname","dom/get","util/env","util/promise","util/util","util/throttle","util/twitter","tfw/util/article","tfw/util/data","tfw/util/tracking","tfw/util/media",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a,b,c,d){var e=g.one("subject",a,"BLOCKQUOTE"),f=g.one("reply",a,"BLOCKQUOTE"),h=e&&e.getAttribute("data-tweet-id"),i=f&&f.getAttribute("data-tweet-id"),k={},l={};h&&(k[h]={item_type:0},o.enqueue({page:"tweet",section:"subject",component:"tweet",action:"results"},j.aug({},b,{item_ids:[h],item_details:k}),!0,d),i&&(l[i]={item_type:0},o.enqueue({page:"tweet",section:"conversation",component:"tweet",action:"results"},j.aug({},b,{item_ids:[i],item_details:l,associations:{4:{association_id:h,association_type:4}}}),!0,d),o.enqueueAudienceImpression({page:"tweet"},d)))}function r(a,b,c){var d={};a&&(d[a]={item_type:0},o.enqueue({page:"tweet",section:"subject",component:"rawembedcode",action:"no_results"},{client_version:v,widget_origin:m.url(),widget_frame:m.frameUrl(),message:b,item_ids:[a],item_details:d},!0,c),o.enqueueAudienceImpression({page:"tweet"},c))}function s(a,b,c,d){x[a]=x[a]||[],x[a].push({s:c,f:d,lang:b})}function t(){z.length&&twttr.widgets.load(z)}function u(a){if(a){var b,d,e;c.apply(this,[a]),b=this.params(),d=this.srcEl&&this.srcEl.getElementsByTagName("A"),e=d&&d[d.length-1],this.hideThread="none"==(b.conversation||this.dataAttr("conversation"))||~j.indexOf(this.classAttr,"tw-hide-thread"),this.hideCard="hidden"==(b.cards||this.dataAttr("cards"))||~j.indexOf(this.classAttr,"tw-hide-media"),"left"==(b.align||this.attr("align"))||~j.indexOf(this.classAttr,"tw-align-left")?this.align="left":"right"==(b.align||this.attr("align"))||~j.indexOf(this.classAttr,"tw-align-right")?this.align="right":("center"==(b.align||this.attr("align"))||~j.indexOf(this.classAttr,"tw-align-center"))&&(this.align="center",this.containerWidth>this.dimensions.MIN_WIDTH*(1/.7)&&this.width>.7*this.containerWidth&&(this.width=.7*this.containerWidth)),this.narrow=b.narrow||this.width<=this.dimensions.NARROW_WIDTH,this.narrow&&this.classAttr.push("var-narrow"),this.tweetId=b.tweetId||e&&l.status(e.href)}}var v="2.0",w="tweetembed",x={},y=[],z=[];u.prototype=new c,j.aug(u.prototype,{renderedClassNames:"twitter-tweet twitter-tweet-rendered",dimensions:{DEFAULT_HEIGHT:"0",DEFAULT_WIDTH:"500",NARROW_WIDTH:"350",MIN_WIDTH:"220",MIN_HEIGHT:"0",WIDE_MEDIA_PADDING:32,NARROW_MEDIA_PADDING:32},create:function(a){var b,c,d=this.sandbox.createElement("div");return d.innerHTML=a,(b=d.children[0]||!1)?("dark"==this.theme&&this.classAttr.push("thm-dark"),this.linkColor&&this.addSiteStyles(),f.present(b,"media-forward")&&(this.fullBleedPhoto=!0),this.augmentWidgets(b),p.retinize(b),b.id=this.id,b.className+=" "+this.classAttr.join(" "),b.lang=this.lang,this.sandbox.setTitle(b.getAttribute("data-iframe-title")||"Tweet"),this.sandbox.appendChild(b).then(j.bind(function(){this.renderResolver.fulfill(this.sandbox)},this)),this.sandbox.style({cssText:"",display:"block",maxWidth:"99%",minWidth:this.dimensions.MIN_WIDTH+"px",padding:"0",borderRadius:"5px",margin:"10px 0",border:"#ddd 1px solid",borderTopColor:"#eee",borderBottomColor:"#bbb",boxShadow:"0 1px 3px rgba(0,0,0,0.15)",position:"absolute",visibility:"hidden"}),c=this.layout(j.bind(function(){this.predefinedWidth=this.width,this.width=this.sandbox.width(this.width),this.collapseRegions()},this),"Insert Sandbox"),c.then(j.bind(function(){this.constrainMedia(b,this.contentWidth(this.width)),this.setNarrow().then(j.bind(function(){this.layout(j.bind(function(){this.completeResolver.fulfill(this.sandbox.element())},this))},this))},this)),q(b,this.baseScribeData(),this.partner,this.dnt),b):void 0},render:function(a,c){var d="",e=this.tweetId;return e?(this.hideCard&&(d+="c"),this.hideThread&&(d+="t"),d&&(e+="-"+d),this.rendered().then(j.bind(function(a){this.srcEl&&this.srcEl.parentNode&&this.layout(j.bind(function(){this.srcEl&&this.srcEl.parentNode&&this.srcEl.parentNode.removeChild(this.srcEl)},this),"Remove Embed Code"),"center"==this.align?a.style({margin:"7px auto",cssFloat:"none"}):this.align&&(this.width==this.dimensions.DEFAULT_WIDTH&&(this.predefinedWidth=this.width=this.dimensions.NARROW_WIDTH),a.style({cssFloat:this.align})),this.layout(j.bind(function(){this.height=this.sandbox.height(this.element.offsetHeight)},this)).then(j.bind(function(){return b.doLayoutAsync(),this.layout(j.bind(function(){this.height=this.sandbox.height(this.element.offsetHeight)},this))},this)).then(j.bind(function(){a.onresize(j.bind(this.handleResize,this))},this)),a.style({position:"static",visibility:"visible"}),b.doLayoutAsync()},this)),s(e,this.lang,j.bind(function(a){this.ready().then(j.bind(function(){this.element=this.create(a),this.readTimestampTranslations(),this.updateTimeStamps(),this.bindIntentHandlers(),b.doLayoutAsync()},this))},this),j.bind(function(){r(this.tweetId,this.partner,this.dnt),this.completeResolver.fulfill(this.srcEl)},this)),y.push(this.completed()),c&&this.completed().then(c),this.completed()):(this.completeResolver.fulfill(this.srcEl),this.completed())},augmentWidgets:function(a){var b=g.one("twitter-follow-button",a,"A");b&&(b.setAttribute("data-related",this.related),b.setAttribute("data-partner",this.partner),b.setAttribute("data-dnt",this.dnt),b.setAttribute("data-show-screen-name","false"),z.push(b.parentNode))},addUrlParams:function(a){var b=this,c={related:this.related,partner:this.partner,original_referer:m.url(),tw_p:w};return this.addUrlParams=e(c,function(a){var c=g.ancestor(".tweet",a,b.element);return{tw_i:c.getAttribute("data-tweet-id")}}),this.addUrlParams(a)},baseScribeData:function(){return{client_version:v,widget_origin:m.url(),widget_frame:m.frameUrl(),message:this.partner}},handleResize:function(a){a!=this.width&&(this.width=a,this.setNarrow(),this.constrainMedia(this.element,this.contentWidth(a)),this.collapseRegions(),this.layout(j.bind(function(){this.height=this.sandbox.height(this.element.offsetHeight),twttr.events.trigger("resize",{target:this.sandbox.element()})},this)),b.doLayoutAsync())},readTimestampTranslations:function(){var a=this.element,b="data-dt-",c=a.getAttribute(b+"months")||"";this.datetime=new d(j.compact({phrases:{AM:a.getAttribute(b+"am"),PM:a.getAttribute(b+"pm")},months:c.split("|"),formats:{full:a.getAttribute(b+"full")}}))},updateTimeStamps:function(){var a=g.one("long-permalink",this.element,"A"),c=a.getAttribute("data-datetime"),d=c&&this.datetime.localTimeStamp(c),e=a.getElementsByTagName("TIME")[0];d&&(this.layout(function(){return e&&e.innerHTML?void(e.innerHTML=d):void(a.innerHTML=d)},"Update Timestamp"),b.doLayoutAsync())}}),u.fetchAndRender=function(){var a,c,d=x,e=[];if(x={},d.keys)e=d.keys();else for(a in d)d.hasOwnProperty(a)&&e.push(a);e.length&&(o.initPostLogging(),c=d[e[0]][0].lang,n.tweets({ids:e.sort(),lang:c,complete:function(a){j.forIn(a,function(a,b){var c=d[a];j.forEach(c,function(a){a.s&&a.s.call(this,b)}),delete d[a]}),b.doLayout(),j.forIn(d,function(a,b){j.forEach(b,function(b){b.f&&b.f.call(this,a)})}),b.doLayout()}}),i.every.apply(null,y).then(function(){t(),o.flush()}))},b.afterLoad(u.fetchAndRender),a(u)})}),provide("dom/textsize",function(a){function b(a,b,c){for(var d,e=[],f=0;d=c[f];f++)e.push(d[0]),e.push(d[1]);return a+b+e.join(":")}function c(a){var b=a||"";return b.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}var d={};a(function(a,e,f){var g,h=document.createElement("span"),i={},j="",k=0,l=0,m=[];if(f=f||[],e=e||"",j=b(a,e,f),d[j])return d[j];h.className=e+" twitter-measurement";try{for(;g=f[k];k++)h.style[g[0]]=g[1]}catch(n){for(;g=f[l];l++)m.push(c(g[0])+":"+g[1]);h.setAttribute("style",m.join(";")+";")}return h.innerHTML=a,document.body.appendChild(h),i.width=h.clientWidth||h.offsetWidth,i.height=h.clientHeight||h.offsetHeight,document.body.removeChild(h),h=null,d[j]=i})}),provide("tfw/widget/follow",function(a){using("util/util","tfw/widget/base","util/querystring","util/uri","util/twitter","util/promise","dom/textsize",function(b,c,d,e,f,g,h){function i(a){if(a){var b,d,e,g;c.apply(this,[a]),b=this.params(),d=b.size||this.dataAttr("size"),e=b.showScreenName||this.dataAttr("show-screen-name"),g=b.count||this.dataAttr("count"),this.classAttr.push("twitter-follow-button"),this.showScreenName="false"!=e,this.showCount=b.showCount!==!1&&"false"!=this.dataAttr("show-count"),"none"==g&&(this.showCount=!1),this.explicitWidth=b.width||this.dataAttr("width")||"",this.screenName=b.screen_name||b.screenName||f.screenName(this.attr("href")),this.preview=b.preview||this.dataAttr("preview")||"",this.align=b.align||this.dataAttr("align")||"",this.size="large"==d?"l":"m"}}i.prototype=new c,b.aug(i.prototype,{parameters:function(){var a={screen_name:this.screenName,lang:this.lang,show_count:this.showCount,show_screen_name:this.showScreenName,align:this.align,id:this.id,preview:this.preview,size:this.size,partner:this.partner,dnt:this.dnt,_:+new Date};return b.compact(a),d.encode(a)},width:function(){if(this.calculatedWidth)return this.calculatedWidth;if(this.explicitWidth)return this.explicitWidth;var a,c,d={cnt:13,btn:24,xlcnt:22,xlbtn:38},e=this.showScreenName?"Follow %{screen_name}":"Follow",f=this._(e,{screen_name:"@"+this.screenName}),g=this._(~b.indexOf(["ja","ko"],this.lang)?"10k unit":"M"),i=this._("%{followers_count} followers",{followers_count:"88888"+g}),j=0,k=0,l=this.styles.base;return"l"==this.size?(l=l.concat(this.styles.large),a=d.xlbtn,c=d.xlcnt):(a=d.btn,c=d.cnt),this.showCount&&(k=h(i,"",l).width+c),j=h(f,"",l.concat(this.styles.button)).width+a,this.calculatedWidth=j+k},render:function(a,c){if(!this.screenName)return g.reject("Missing Screen Name").then(c);var d=twttr.widgets.config.assetUrl()+"/widgets/follow_button.1411706120.html#"+this.parameters(),e=this.create(d,this.dimensions(),{title:this._("Twitter Follow Button")}).then(b.bind(function(a){return this.element=a},this));return c&&e.then(c),e}}),a(i)})}),provide("tfw/widget/tweetbutton",function(a){using("tfw/widget/base","tfw/util/globals","util/util","util/querystring","util/uri","util/twitter","util/typevalidator","dom/textsize",function(b,c,d,e,f,g,h,i){function j(a){b.apply(this,[a]);
var e=this.params(),h=e.count||this.dataAttr("count"),i=e.size||this.dataAttr("size"),j=f.getScreenNameFromPage(),o=""+(e.shareWithRetweet||this.dataAttr("share-with-retweet")||c.val("share-with-retweet"));this.classAttr.push("twitter-tweet-button"),"hashtag"==e.type||~d.indexOf(this.classAttr,"twitter-hashtag-button")?(this.type="hashtag",this.classAttr.push("twitter-hashtag-button")):"mention"==e.type||~d.indexOf(this.classAttr,"twitter-mention-button")?(this.type="mention",this.classAttr.push("twitter-mention-button")):this.classAttr.push("twitter-share-button"),this.text=e.text||this.dataAttr("text"),this.text&&/\+/.test(this.text)&&!/ /.test(this.text)&&(this.text=this.text.replace(/\+/g," ")),this.counturl=e.counturl||this.dataAttr("counturl"),this.searchlink=e.searchlink||this.dataAttr("searchlink"),this.button_hashtag=g.hashTag(e.button_hashtag||e.hashtag||this.dataAttr("button-hashtag"),!1),this.size="large"==i?"l":"m",this.align=e.align||this.dataAttr("align")||"",this.via=e.via||this.dataAttr("via"),this.hashtags=e.hashtags||this.dataAttr("hashtags"),this.screen_name=g.screenName(e.screen_name||e.screenName||this.dataAttr("button-screen-name")),this.url=e.url||this.dataAttr("url"),this.type?(this.count="none",this.shareWithRetweet="never",j&&(this.related=this.related?j+","+this.related:j)):(this.text=this.text||k,this.url=this.url||f.getCanonicalURL()||l,this.count=~d.indexOf(m,h)?h:"horizontal",this.count="vertical"==this.count&&"l"==this.size?"none":this.count,this.via=this.via||j,o&&~d.indexOf(n,o)&&(this.shareWithRetweet=o.replace("-","_")))}var k=document.title,l=encodeURI(location.href),m=["vertical","horizontal","none"],n=[,"never","publisher-first","publisher-only","author-first","author-only"];j.prototype=new b,d.aug(j.prototype,{widgetUrlParams:function(){return d.compact({text:this.text,url:this.url,via:this.via,related:this.related,count:this.count,lang:this.lang,counturl:this.counturl,searchlink:this.searchlink,placeid:this.placeid,original_referer:location.href,id:this.id,size:this.size,type:this.type,screen_name:this.screen_name,share_with_retweet:this.shareWithRetweet,button_hashtag:this.button_hashtag,hashtags:this.hashtags,align:this.align,partner:this.partner,dnt:this.dnt,_:+new Date})},parameters:function(){return e.encode(this.widgetUrlParams())},height:function(){return"vertical"==this.count?62:"m"==this.size?20:28},width:function(){var a={ver:8,cnt:14,btn:24,xlcnt:18,xlbtn:38},b="vertical"==this.count,c="hashtag"==this.type&&this.button_hashtag?"Tweet %{hashtag}":"mention"==this.type&&this.screen_name?"Tweet to %{name}":"Tweet",e=this._(c,{name:"@"+this.screen_name,hashtag:"#"+this.button_hashtag}),f=this._("K"),g=this._("100K+"),h=(b?"8888":"88888")+f,j=0,k=0,l=0,m=0,n=this.styles.base,o=n;return~d.indexOf(["ja","ko"],this.lang)?h+=this._("10k unit"):h=h.length>g.length?h:g,b?(o=n.concat(this.styles.vbubble),m=a.ver,l=a.btn):"l"==this.size?(n=o=n.concat(this.styles.large),l=a.xlbtn,m=a.xlcnt):(l=a.btn,m=a.cnt),"none"!=this.count&&(k=i(h,"",o).width+m),j=i(e,"",n.concat(this.styles.button)).width+l,b?j>k?j:k:this.calculatedWidth=j+k},render:function(a,b){var c,e=twttr.widgets.config.assetUrl()+"/widgets/tweet_button.1411706120.html#"+this.parameters();return this.count&&this.classAttr.push("twitter-count-"+this.count),c=this.create(e,this.dimensions(),{title:this._("Twitter Tweet Button")}).then(d.bind(function(a){return this.element=a},this)),b&&c.then(b),c}}),a(j)})}),provide("tfw/factories",function(a){using("util/util","util/promise","util/twitter","tfw/widget/base","tfw/widget/tweetbutton","tfw/widget/follow","tfw/widget/embed","tfw/widget/timeline",function(b,c,d,e,f,g,h,i){function j(a,d,f,g){return a=a||[],f=f||{},function(){var h,i,j,k,l=Array.prototype.slice.apply(arguments,[0,a.length]),m=Array.prototype.slice.apply(arguments,[a.length]);return b.forEach(m,function(a){return a?1===a.nodeType?void(j=a):b.isType("function",a)?void(h=a):void(b.isType("object",a)&&(i=a)):void 0}),l.length!=a.length||0===m.length?(h&&b.async(function(){h(!1)}),c.reject("Not enough parameters")):j?(i=b.aug(i||{},f),i.targetEl=j,b.forEach(a,function(a){i[a]=l.shift()}),k=new d(i),e.doLayout(),k.render(twttr.widgets.config),g&&g(),h&&k.completed().then(h,function(){h(!1)}),k.completed()):(h&&b.async(function(){h(!1)}),c.reject("No target specified"))}}function k(a){var c;a.linkColor=a.linkColor||a.previewParams.link_color,a.theme=a.theme||a.previewParams.theme,a.height=a.height||a.previewParams.height,c=new i(a),this.render=b.bind(c.render,c),this.completed=b.bind(c.completed,c)}var l=j(["url"],f,{type:"share"}),m=j(["hashtag"],f,{type:"hashtag"}),n=j(["screenName"],f,{type:"mention"}),o=j(["screenName"],g),p=j(["tweetId"],h,{},h.fetchAndRender),q=j(["widgetId"],i),r=j(["previewParams"],k),s={createShareButton:l,createMentionButton:n,createHashtagButton:m,createFollowButton:o,createTweet:p,createTweetEmbed:p,createTimeline:q};d.isTwitterURL(window.location.href)&&(s.createTimelinePreview=r),a(s)})}),!function(){window.twttr=window.twttr||{},twttr.host=twttr.host||"platform.twitter.com",using("util/domready","util/env","util/logger",function(a,b,c){function d(a){return!a&&/^http\:$/.test(window.location.protocol)||twttr.ignoreSSL?"http":"https"}if(!b.ie6()){if(twttr.widgets&&twttr.widgets.loaded)return twttr.widgets.load(),!1;if(twttr.init)return!1;twttr.init=!0,twttr._e=twttr._e||[],twttr.ready=twttr.ready||function(a){twttr.widgets&&twttr.widgets.loaded?a(twttr):twttr._e.push(a)},using.path.length||(using.path=d()+"://"+twttr.host+"/js"),twttr.ignoreSSL=twttr.ignoreSSL||!1;var e=[];twttr.events={bind:function(a,b){return e.push([a,b])}},a(function(){using("tfw/widget/base","tfw/widget/follow","tfw/widget/tweetbutton","tfw/widget/embed","tfw/widget/timeline","tfw/widget/intent","tfw/factories","tfw/util/article","util/events","util/util",function(a,b,f,g,h,i,j,k,l,m){function n(a){var b=twttr.host;return"https"==d(a)&&twttr.secureHost&&(b=twttr.secureHost),d(a)+"://"+b}function o(){using("tfw/hub/client",function(a){twttr.events.hub=a.init(q),a.init(q,!0)})}var p,q={widgets:{"a.twitter-share-button":f,"a.twitter-mention-button":f,"a.twitter-hashtag-button":f,"a.twitter-follow-button":b,"blockquote.twitter-tweet":g,"a.twitter-timeline":h,"div.twitter-timeline":h,body:i}},r=twttr.events&&twttr.events.hub?twttr.events:{};q.assetUrl=n,twttr.widgets=twttr.widgets||{},m.aug(twttr.widgets,j,{config:{assetUrl:n},load:function(b){c.time("load"),a.init(q),a.embed(b),twttr.widgets.loaded=!0}}),m.aug(twttr.events,r,l.Emitter),p=twttr.events.bind,twttr.events.bind=function(a,b){o(),this.bind=p,this.bind(a,b)},m.forEach(e,function(a){twttr.events.bind(a[0],a[1])}),m.forEach(twttr._e,function(a){m.async(function(){a(twttr)})}),twttr.ready=function(a){m.async(function(){a(twttr)})},twttr.widgets.load()})})}})}()});